   1              	 .cpu cortex-m0
   2              	 .eabi_attribute 20,1
   3              	 .eabi_attribute 21,1
   4              	 .eabi_attribute 23,3
   5              	 .eabi_attribute 24,1
   6              	 .eabi_attribute 25,1
   7              	 .eabi_attribute 26,1
   8              	 .eabi_attribute 30,4
   9              	 .eabi_attribute 34,0
  10              	 .eabi_attribute 18,4
  11              	 .file "smack_sl.c"
  12              	 .text
  13              	.Ltext0:
  14              	 .cfi_sections .debug_frame
  15              	 .section .text.example_handler,"ax",%progbits
  16              	 .align 1
  17              	 .global example_handler
  18              	 .arch armv6s-m
  19              	 .syntax unified
  20              	 .code 16
  21              	 .thumb_func
  22              	 .fpu softvfp
  24              	example_handler:
  25              	.LFB43:
  26              	 .file 1 "Z:/Documents/GitHub/OpenSesame/smack_sl/src/smack_sl.c"
   1:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** /* ============================================================================
   2:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** ** Copyright (c) 2021 Infineon Technologies AG
   3:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** **               All rights reserved.
   4:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** **               www.infineon.com
   5:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** ** ============================================================================
   6:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** **
   7:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** ** Redistribution and use of this software only permitted to the extent
   8:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** ** expressly agreed with Infineon Technologies AG.
   9:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** ** ============================================================================
  10:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** *
  11:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** */
  12:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
  13:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** /** @file smack_sl.c
  14:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *  @brief Entry point for the application code after low-level ROM boot.
  15:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  */
  16:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
  17:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // standard libs
  18:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #include "core_cm0.h"
  19:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #include <stdbool.h>
  20:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #include <stdint.h>
  21:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
  22:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // ROM and peripheral libraries
  23:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #include "rom_lib.h"
  24:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #include "sys_tim_lib.h"
  25:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #include "shc_lib.h"
  26:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #include "gpio.h"
  27:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
  28:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // smack_sl project files
  29:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #include "smack_sl.h"
  30:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #include "smack_dataexchange.h"
  31:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
  32:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
  33:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // NDEF Tag Definition
  34:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
  35:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** /* NDEF tag defined by user.
  36:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  * To activate this tag, set the field "tag_type_2_ptr" in APARAM.
  37:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  */
  38:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** const uint8_t smack_sl_tag[] =
  39:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
  40:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0x05, 0xc0, 0xbe, 0xef,
  41:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0xde, 0xad, 0x00, 0x00,
  42:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0xff, 0xff, 0xff, 0xff,
  43:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0xE1,
  44:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0x10,
  45:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0x0b,
  46:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0x0f,
  47:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0x03, 0x4f, 0xd1, 0x01,
  48:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0x4b, 0x54, 0x02, 'e',
  49:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'n', 'I', 'n', 'f',
  50:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'i', 'n', 'e', 'o',
  51:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'n', ' ', 'T', 'e',
  52:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'c', 'h', 'n', 'o',
  53:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'l', 'o', 'g', 'i',
  54:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'e', 's', ' ', 'A',
  55:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'G', ' ', ' ', 'N',
  56:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'G', 'C', '1', '0',
  57:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     '8', '0', ' ', ' ',
  58:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'S', 'm', 'A', 'c',
  59:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'K', ' ', ' ', '0',
  60:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     '5', 'C', '0', 'B',
  61:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'E', 'E', 'F', 'D',
  62:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'E', 'A', 'D', '0',
  63:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     '0', '0', ' ', ' ',
  64:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'V', '4', '.', '0',
  65:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     '.', '1', ' ', '(',
  66:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'N', 'V', 'M', ')',
  67:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0xfe, 0xff, 0xff, 0xff,
  68:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0xff, 0xff, 0xff
  69:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** };
  70:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
  71:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
  72:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // Definitions
  73:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
  74:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #ifndef wait_about_1ms
  75:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #define WAIT_ABOUT_1MS   0x8000   //!< clock tick constant ~1ms @ 28MHz
  76:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #endif
  77:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
  78:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #define MCU_VALID         0xA55B00B5
  79:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #define PASSCODE          0x12344321
  80:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #define ZERO_32           0x00000000
  81:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #define PC_VAL            0x55555555
  82:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #define PC_INVAL          0x99999999
  83:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #define HARVESTING_DONE   0xBADAB00B
  84:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
  85:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** /*
  86:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****    Previous firmware stored version data in the last flash page (0x1EFF4–0x1EFFF).
  87:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****    To avoid conflicts, we now store the LED state in the previous page.
  88:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****    Assuming a page size of 128 bytes, the previous page spans 0x0001EF00–0x0001EF7F.
  89:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****    Here we reserve address 0x0001EF10 for the LED state.
  90:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** */
  91:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #define LED_STATE_ADDR    0x0001EF10   // New LED state address
  92:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #define LED_GPIO          1            // LED is connected to GPIO1
  93:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
  94:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
  95:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // Global Variables
  96:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
  97:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** uint32_t sl_counter;
  98:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** Power_State_enum_t current_state = POWER_POWER_OFF;
  99:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** uint32_t turn_cycles = 0;
 100:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 101:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** uint16_t voltage_sweep = 0;
 102:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** bool done_sweep = false;
 103:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 104:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 105:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // Local Function Prototypes
 106:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 107:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** static uint32_t toggle_led_state(void);
 108:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** uint16_t get_threshold_from_voltage(float input_voltage);
 109:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 110:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 111:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // Example Interrupt and Helper Functions
 112:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 113:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** static uint32_t example_counter = 0;
 114:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** void example_handler(void)
 115:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
  27              	 .loc 1 115 1 view-0
  28              	 .cfi_startproc
  29              	 
  30              	 
  31              	 
 116:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     example_counter++;
  32              	 .loc 1 116 5 view .LVU1
  33              	 .loc 1 116 20 is_stmt 0 view .LVU2
  34 0000 024A     	 ldr r2,.L2
 117:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
  35              	 .loc 1 117 1 view .LVU3
  36              	 
 116:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     example_counter++;
  37              	 .loc 1 116 20 view .LVU4
  38 0002 1368     	 ldr r3,[r2]
  39 0004 0133     	 adds r3,r3,#1
  40 0006 1360     	 str r3,[r2]
  41              	 .loc 1 117 1 view .LVU5
  42 0008 7047     	 bx lr
  43              	.L3:
  44 000a C046     	 .align 2
  45              	.L2:
  46 000c 00000000 	 .word .LANCHOR0
  47              	 .cfi_endproc
  48              	.LFE43:
  50              	 .section .text.hardfault_handler,"ax",%progbits
  51              	 .align 1
  52              	 .global hardfault_handler
  53              	 .syntax unified
  54              	 .code 16
  55              	 .thumb_func
  56              	 .fpu softvfp
  58              	hardfault_handler:
  59              	.LFB44:
 118:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 119:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** void hardfault_handler(void)
 120:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
  60              	 .loc 1 120 1 is_stmt 1 view-0
  61              	 .cfi_startproc
  62              	 
  63              	 
  64              	 
 121:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     uint32_t cnt = 30000000;
  65              	 .loc 1 121 5 view .LVU7
  66              	.LVL0:
 122:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     while (cnt--)
  67              	 .loc 1 122 5 view .LVU8
  68              	 .loc 1 122 11 is_stmt 0 view .LVU9
  69 0000 034B     	 ldr r3,.L7
  70              	.LVL1:
  71              	.L5:
  72              	 .loc 1 122 11 is_stmt 1 view .LVU10
  73              	 .loc 1 122 11 is_stmt 0 view .LVU11
  74 0002 013B     	 subs r3,r3,#1
  75              	.LVL2:
  76              	 .loc 1 122 11 view .LVU12
  77 0004 002B     	 cmp r3,#0
  78 0006 00D1     	 bne .L6
 123:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 124:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         __NOP();
 125:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 126:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
  79              	 .loc 1 126 1 view .LVU13
  80              	 
  81 0008 7047     	 bx lr
  82              	.L6:
  83              	.LVL3:
 124:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
  84              	 .loc 1 124 9 is_stmt 1 view .LVU14
  85              	 .syntax divided
  86              	
  87 000a C046     	 nop
  88              	
  89              	 .thumb
  90              	 .syntax unified
  91 000c F9E7     	 b .L5
  92              	.L8:
  93 000e C046     	 .align 2
  94              	.L7:
  95 0010 81C3C901 	 .word 30000001
  96              	 .cfi_endproc
  97              	.LFE44:
  99              	 .section .text.sweep_voltages,"ax",%progbits
 100              	 .align 1
 101              	 .global sweep_voltages
 102              	 .syntax unified
 103              	 .code 16
 104              	 .thumb_func
 105              	 .fpu softvfp
 107              	sweep_voltages:
 108              	.LFB45:
 127:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 128:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** void sweep_voltages(void)
 129:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
 109              	 .loc 1 129 1 view-0
 110              	 .cfi_startproc
 111              	 
 112              	 
 130:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     Mailbox_t* mbx = get_mailbox_address();
 113              	 .loc 1 130 5 view .LVU16
 129:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     Mailbox_t* mbx = get_mailbox_address();
 114              	 .loc 1 129 1 is_stmt 0 view .LVU17
 115 0000 13B5     	 push {r0,r1,r4,lr}
 116              	.LCFI0:
 117              	 .cfi_def_cfa_offset 16
 118              	 .cfi_offset 0,-16
 119              	 .cfi_offset 1,-12
 120              	 .cfi_offset 4,-8
 121              	 .cfi_offset 14,-4
 122              	 .loc 1 130 22 view .LVU18
 123 0002 0B4B     	 ldr r3,.L12
 124 0004 5B6A     	 ldr r3,[r3,#36]
 125 0006 0193     	 str r3,[sp,#4]
 126 0008 9847     	 blx r3
 127              	.LVL4:
 131:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (shc_compare(shc_channel_ma, get_threshold_from_voltage(3.0)) == false)
 128              	 .loc 1 131 9 view .LVU19
 129 000a 0A49     	 ldr r1,.L12+4
 130:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     Mailbox_t* mbx = get_mailbox_address();
 130              	 .loc 1 130 22 view .LVU20
 131 000c 0400     	 movs r4,r0
 132              	.LVL5:
 133              	 .loc 1 131 5 is_stmt 1 view .LVU21
 132:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 133:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         mbx->content[6] = voltage_sweep;
 134:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         done_sweep = true;
 135:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 136:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     else
 137:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 138:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         voltage_sweep++;
 139:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 140:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 141:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 142:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** /* Toggle lock state for H-Bridge control */
 143:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** void toggle_lock(bool *hs1, bool *ls1, bool *hs2, bool *ls2, bool lock)
 144:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
 145:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (lock)
 146:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 147:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         if (*hs1)
 148:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 149:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             *hs1 = false;
 150:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 151:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 152:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         if (!*ls1)
 153:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 154:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             *ls1 = true;
 155:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 156:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 157:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         if (!*hs2)
 158:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 159:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             if (*ls2)
 160:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             {
 161:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 *ls2 = false;
 162:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 163:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             }
 164:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             *hs2 = true;
 165:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 166:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 167:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         if (*ls2)
 168:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 169:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             *ls2 = false;
 170:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 171:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 172:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 173:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     else
 174:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 175:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         if (!*hs1)
 176:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 177:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             if (*ls1)
 178:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             {
 179:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 *ls1 = false;
 180:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 181:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             }
 182:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             *hs1 = true;
 183:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 184:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 185:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         if (*ls1)
 186:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 187:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             *ls1 = false;
 188:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 189:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 190:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         if (*hs2)
 191:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 192:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             *hs2 = false;
 193:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 194:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 195:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         if (!*ls2)
 196:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 197:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             *ls2 = true;
 198:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 199:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 200:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 201:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 202:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 203:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** /* Function to control the motor; as in your original implementation */
 204:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** void turn_motor(Mailbox_t* mbx, bool* hs1, bool* ls1, bool* hs2, bool* ls2, bool lock)
 205:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
 206:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     const uint32_t wait_time_discharge = WAIT_ABOUT_1MS * 32;
 207:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     const uint32_t wait_time_charge = WAIT_ABOUT_1MS;
 208:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 209:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     while (!shc_compare(shc_channel_ma, get_threshold_from_voltage(3.0)))
 210:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 211:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         mbx->content[5] = 0x22222222;
 212:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 213:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     toggle_lock(hs1, ls1, hs2, ls2, lock);
 214:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     sys_tim_singleshot_32(0, wait_time_discharge, 14);
 215:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (!lock)
 216:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 217:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         *ls2 = false;
 218:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 219:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     else
 220:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 221:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         *ls1 = false;
 222:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 223:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 224:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     sys_tim_singleshot_32(0, wait_time_charge, 14);
 225:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 226:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 227:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** /* Helper function: convert voltage (in volts) to threshold ticks. */
 228:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** uint16_t get_threshold_from_voltage(float input_voltage)
 229:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
 230:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     return (uint16_t)(input_voltage * 1000.0F);
 134              	 .loc 1 230 5 view .LVU22
 131:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (shc_compare(shc_channel_ma, get_threshold_from_voltage(3.0)) == false)
 135              	 .loc 1 131 9 is_stmt 0 view .LVU23
 136 000e 0320     	 movs r0,#3
 137              	.LVL6:
 131:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (shc_compare(shc_channel_ma, get_threshold_from_voltage(3.0)) == false)
 138              	 .loc 1 131 9 view .LVU24
 139 0010 FFF7FEFF 	 bl shc_compare
 140              	.LVL7:
 141 0014 084B     	 ldr r3,.L12+8
 131:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (shc_compare(shc_channel_ma, get_threshold_from_voltage(3.0)) == false)
 142              	 .loc 1 131 8 view .LVU25
 143 0016 0028     	 cmp r0,#0
 144 0018 05D1     	 bne .L10
 133:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         done_sweep = true;
 145              	 .loc 1 133 9 is_stmt 1 view .LVU26
 134:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 146              	 .loc 1 134 20 is_stmt 0 view .LVU27
 147 001a 0122     	 movs r2,#1
 133:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         done_sweep = true;
 148              	 .loc 1 133 25 view .LVU28
 149 001c 1B88     	 ldrh r3,[r3]
 150 001e A361     	 str r3,[r4,#24]
 134:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 151              	 .loc 1 134 9 is_stmt 1 view .LVU29
 134:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 152              	 .loc 1 134 20 is_stmt 0 view .LVU30
 153 0020 064B     	 ldr r3,.L12+12
 154 0022 1A70     	 strb r2,[r3]
 155              	.L9:
 140:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 156              	 .loc 1 140 1 view .LVU31
 157              	 
 158              	.LVL8:
 140:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 159              	 .loc 1 140 1 view .LVU32
 160 0024 13BD     	 pop {r0,r1,r4,pc}
 161              	.LVL9:
 162              	.L10:
 138:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 163              	 .loc 1 138 9 is_stmt 1 view .LVU33
 138:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 164              	 .loc 1 138 22 is_stmt 0 view .LVU34
 165 0026 1A88     	 ldrh r2,[r3]
 166 0028 0132     	 adds r2,r2,#1
 167 002a 1A80     	 strh r2,[r3]
 140:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 168              	 .loc 1 140 1 view .LVU35
 169 002c FAE7     	 b .L9
 170              	.L13:
 171 002e C046     	 .align 2
 172              	.L12:
 173 0030 00000000 	 .word rom_func_table
 174 0034 B80B0000 	 .word 3000
 175 0038 00000000 	 .word .LANCHOR1
 176 003c 00000000 	 .word .LANCHOR2
 177              	 .cfi_endproc
 178              	.LFE45:
 180              	 .section .text.toggle_lock,"ax",%progbits
 181              	 .align 1
 182              	 .global toggle_lock
 183              	 .syntax unified
 184              	 .code 16
 185              	 .thumb_func
 186              	 .fpu softvfp
 188              	toggle_lock:
 189              	.LVL10:
 190              	.LFB46:
 144:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (lock)
 191              	 .loc 1 144 1 is_stmt 1 view-0
 192              	 .cfi_startproc
 193              	 
 194              	 
 145:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 195              	 .loc 1 145 5 view .LVU37
 144:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (lock)
 196              	 .loc 1 144 1 is_stmt 0 view .LVU38
 197 0000 F7B5     	 push {r0,r1,r2,r4,r5,r6,r7,lr}
 198              	.LCFI1:
 199              	 .cfi_def_cfa_offset 32
 200              	 .cfi_offset 0,-32
 201              	 .cfi_offset 1,-28
 202              	 .cfi_offset 2,-24
 203              	 .cfi_offset 4,-20
 204              	 .cfi_offset 5,-16
 205              	 .cfi_offset 6,-12
 206              	 .cfi_offset 7,-8
 207              	 .cfi_offset 14,-4
 144:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (lock)
 208              	 .loc 1 144 1 view .LVU39
 209 0002 1D00     	 movs r5,r3
 210 0004 08AB     	 add r3,sp,#32
 211              	.LVL11:
 144:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (lock)
 212              	 .loc 1 144 1 view .LVU40
 213 0006 1B78     	 ldrb r3,[r3]
 214              	.LVL12:
 144:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (lock)
 215              	 .loc 1 144 1 view .LVU41
 216 0008 0C00     	 movs r4,r1
 217 000a 1600     	 movs r6,r2
 147:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 218              	 .loc 1 147 13 view .LVU42
 219 000c 0178     	 ldrb r1,[r0]
 220              	.LVL13:
 147:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 221              	 .loc 1 147 13 view .LVU43
 222 000e 0200     	 movs r2,r0
 223              	.LVL14:
 144:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (lock)
 224              	 .loc 1 144 1 view .LVU44
 225 0010 0190     	 str r0,[sp,#4]
 145:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 226              	 .loc 1 145 8 view .LVU45
 227 0012 002B     	 cmp r3,#0
 228 0014 3BD0     	 beq .L15
 147:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 229              	 .loc 1 147 9 is_stmt 1 view .LVU46
 147:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 230              	 .loc 1 147 12 is_stmt 0 view .LVU47
 231 0016 0029     	 cmp r1,#0
 232 0018 08D0     	 beq .L16
 149:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 233              	 .loc 1 149 13 is_stmt 1 view .LVU48
 149:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 234              	 .loc 1 149 18 is_stmt 0 view .LVU49
 235 001a 0020     	 movs r0,#0
 236              	.LVL15:
 150:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 237              	 .loc 1 150 13 view .LVU50
 238 001c 364F     	 ldr r7,.L43
 149:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 239              	 .loc 1 149 18 view .LVU51
 240 001e 1070     	 strb r0,[r2]
 150:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 241              	 .loc 1 150 13 is_stmt 1 view .LVU52
 242 0020 FC37     	 adds r7,r7,#252
 243 0022 2B78     	 ldrb r3,[r5]
 244 0024 3278     	 ldrb r2,[r6]
 245              	.LVL16:
 150:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 246              	 .loc 1 150 13 is_stmt 0 view .LVU53
 247 0026 2178     	 ldrb r1,[r4]
 248 0028 7F6A     	 ldr r7,[r7,#36]
 249 002a B847     	 blx r7
 250              	.LVL17:
 251              	.L16:
 152:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 252              	 .loc 1 152 9 is_stmt 1 view .LVU54
 152:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 253              	 .loc 1 152 12 is_stmt 0 view .LVU55
 254 002c 2378     	 ldrb r3,[r4]
 255 002e 002B     	 cmp r3,#0
 256 0030 09D1     	 bne .L17
 154:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 257              	 .loc 1 154 13 is_stmt 1 view .LVU56
 154:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 258              	 .loc 1 154 18 is_stmt 0 view .LVU57
 259 0032 0121     	 movs r1,#1
 155:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 260              	 .loc 1 155 13 view .LVU58
 261 0034 304F     	 ldr r7,.L43
 262 0036 0198     	 ldr r0,[sp,#4]
 154:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 263              	 .loc 1 154 18 view .LVU59
 264 0038 2170     	 strb r1,[r4]
 155:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 265              	 .loc 1 155 13 is_stmt 1 view .LVU60
 266 003a FC37     	 adds r7,r7,#252
 267 003c 2B78     	 ldrb r3,[r5]
 268 003e 3278     	 ldrb r2,[r6]
 269 0040 0078     	 ldrb r0,[r0]
 270 0042 7F6A     	 ldr r7,[r7,#36]
 271 0044 B847     	 blx r7
 272              	.LVL18:
 273              	.L17:
 157:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 274              	 .loc 1 157 9 view .LVU61
 157:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 275              	 .loc 1 157 12 is_stmt 0 view .LVU62
 276 0046 3378     	 ldrb r3,[r6]
 277 0048 002B     	 cmp r3,#0
 278 004a 12D1     	 bne .L18
 159:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             {
 279              	 .loc 1 159 13 is_stmt 1 view .LVU63
 150:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 280              	 .loc 1 150 13 is_stmt 0 view .LVU64
 281 004c 2A4A     	 ldr r2,.L43
 282 004e FC32     	 adds r2,r2,#252
 283 0050 576A     	 ldr r7,[r2,#36]
 159:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             {
 284              	 .loc 1 159 16 view .LVU65
 285 0052 2A78     	 ldrb r2,[r5]
 286 0054 002A     	 cmp r2,#0
 287 0056 05D0     	 beq .L19
 161:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 288              	 .loc 1 161 17 is_stmt 1 view .LVU66
 162:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             }
 289              	 .loc 1 162 17 is_stmt 0 view .LVU67
 290 0058 0198     	 ldr r0,[sp,#4]
 161:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 291              	 .loc 1 161 22 view .LVU68
 292 005a 2B70     	 strb r3,[r5]
 162:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             }
 293              	 .loc 1 162 17 is_stmt 1 view .LVU69
 294 005c 3278     	 ldrb r2,[r6]
 295 005e 2178     	 ldrb r1,[r4]
 296 0060 0078     	 ldrb r0,[r0]
 297 0062 B847     	 blx r7
 298              	.LVL19:
 299              	.L19:
 164:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 300              	 .loc 1 164 13 view .LVU70
 164:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 301              	 .loc 1 164 18 is_stmt 0 view .LVU71
 302 0064 0122     	 movs r2,#1
 165:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 303              	 .loc 1 165 13 view .LVU72
 304 0066 0198     	 ldr r0,[sp,#4]
 164:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 305              	 .loc 1 164 18 view .LVU73
 306 0068 3270     	 strb r2,[r6]
 165:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 307              	 .loc 1 165 13 is_stmt 1 view .LVU74
 308 006a 2B78     	 ldrb r3,[r5]
 309 006c 2178     	 ldrb r1,[r4]
 310 006e 0078     	 ldrb r0,[r0]
 311 0070 B847     	 blx r7
 312              	.LVL20:
 313              	.L18:
 167:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 314              	 .loc 1 167 9 view .LVU75
 167:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 315              	 .loc 1 167 12 is_stmt 0 view .LVU76
 316 0072 2B78     	 ldrb r3,[r5]
 317 0074 002B     	 cmp r3,#0
 318 0076 09D0     	 beq .L14
 169:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 319              	 .loc 1 169 13 is_stmt 1 view .LVU77
 169:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 320              	 .loc 1 169 18 is_stmt 0 view .LVU78
 321 0078 0023     	 movs r3,#0
 322              	.L42:
 197:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 323              	 .loc 1 197 18 view .LVU79
 324 007a 2B70     	 strb r3,[r5]
 198:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 325              	 .loc 1 198 13 is_stmt 1 view .LVU80
 326 007c 2178     	 ldrb r1,[r4]
 327 007e 1E4C     	 ldr r4,.L43
 328              	.LVL21:
 198:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 329              	 .loc 1 198 13 is_stmt 0 view .LVU81
 330 0080 0198     	 ldr r0,[sp,#4]
 331 0082 FC34     	 adds r4,r4,#252
 332 0084 3278     	 ldrb r2,[r6]
 333 0086 0078     	 ldrb r0,[r0]
 334 0088 646A     	 ldr r4,[r4,#36]
 335 008a A047     	 blx r4
 336              	.LVL22:
 337              	.L14:
 201:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 338              	 .loc 1 201 1 view .LVU82
 339              	 
 340              	.LVL23:
 341              	.LVL24:
 201:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 342              	 .loc 1 201 1 view .LVU83
 343 008c F7BD     	 pop {r0,r1,r2,r4,r5,r6,r7,pc}
 344              	.LVL25:
 345              	.L15:
 175:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 346              	 .loc 1 175 9 is_stmt 1 view .LVU84
 175:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 347              	 .loc 1 175 12 is_stmt 0 view .LVU85
 348 008e 0029     	 cmp r1,#0
 349 0090 12D1     	 bne .L22
 177:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             {
 350              	 .loc 1 177 13 is_stmt 1 view .LVU86
 150:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 351              	 .loc 1 150 13 is_stmt 0 view .LVU87
 352 0092 194B     	 ldr r3,.L43
 353 0094 FC33     	 adds r3,r3,#252
 354 0096 5F6A     	 ldr r7,[r3,#36]
 177:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             {
 355              	 .loc 1 177 16 view .LVU88
 356 0098 2378     	 ldrb r3,[r4]
 357 009a 002B     	 cmp r3,#0
 358 009c 05D0     	 beq .L23
 179:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 359              	 .loc 1 179 17 is_stmt 1 view .LVU89
 180:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             }
 360              	 .loc 1 180 17 is_stmt 0 view .LVU90
 361 009e 0198     	 ldr r0,[sp,#4]
 362              	.LVL26:
 179:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 363              	 .loc 1 179 22 view .LVU91
 364 00a0 2170     	 strb r1,[r4]
 180:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             }
 365              	 .loc 1 180 17 is_stmt 1 view .LVU92
 366 00a2 2B78     	 ldrb r3,[r5]
 367 00a4 3278     	 ldrb r2,[r6]
 368              	.LVL27:
 180:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             }
 369              	 .loc 1 180 17 is_stmt 0 view .LVU93
 370 00a6 0078     	 ldrb r0,[r0]
 371 00a8 B847     	 blx r7
 372              	.LVL28:
 373              	.L23:
 182:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 374              	 .loc 1 182 13 is_stmt 1 view .LVU94
 182:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 375              	 .loc 1 182 18 is_stmt 0 view .LVU95
 376 00aa 0120     	 movs r0,#1
 377 00ac 019B     	 ldr r3,[sp,#4]
 378 00ae 1870     	 strb r0,[r3]
 183:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 379              	 .loc 1 183 13 is_stmt 1 view .LVU96
 380 00b0 2B78     	 ldrb r3,[r5]
 381 00b2 3278     	 ldrb r2,[r6]
 382 00b4 2178     	 ldrb r1,[r4]
 383 00b6 B847     	 blx r7
 384              	.LVL29:
 385              	.L22:
 185:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 386              	 .loc 1 185 9 view .LVU97
 185:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 387              	 .loc 1 185 12 is_stmt 0 view .LVU98
 388 00b8 2378     	 ldrb r3,[r4]
 389 00ba 002B     	 cmp r3,#0
 390 00bc 09D0     	 beq .L24
 187:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 391              	 .loc 1 187 13 is_stmt 1 view .LVU99
 187:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 392              	 .loc 1 187 18 is_stmt 0 view .LVU100
 393 00be 0021     	 movs r1,#0
 188:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 394              	 .loc 1 188 13 view .LVU101
 395 00c0 0D4F     	 ldr r7,.L43
 396 00c2 0198     	 ldr r0,[sp,#4]
 187:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 397              	 .loc 1 187 18 view .LVU102
 398 00c4 2170     	 strb r1,[r4]
 188:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 399              	 .loc 1 188 13 is_stmt 1 view .LVU103
 400 00c6 FC37     	 adds r7,r7,#252
 401 00c8 2B78     	 ldrb r3,[r5]
 402 00ca 3278     	 ldrb r2,[r6]
 403 00cc 0078     	 ldrb r0,[r0]
 404 00ce 7F6A     	 ldr r7,[r7,#36]
 405 00d0 B847     	 blx r7
 406              	.LVL30:
 407              	.L24:
 190:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 408              	 .loc 1 190 9 view .LVU104
 190:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 409              	 .loc 1 190 12 is_stmt 0 view .LVU105
 410 00d2 3378     	 ldrb r3,[r6]
 411 00d4 002B     	 cmp r3,#0
 412 00d6 09D0     	 beq .L25
 192:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 413              	 .loc 1 192 13 is_stmt 1 view .LVU106
 192:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 414              	 .loc 1 192 18 is_stmt 0 view .LVU107
 415 00d8 0022     	 movs r2,#0
 193:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 416              	 .loc 1 193 13 view .LVU108
 417 00da 074F     	 ldr r7,.L43
 418 00dc 0198     	 ldr r0,[sp,#4]
 192:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 419              	 .loc 1 192 18 view .LVU109
 420 00de 3270     	 strb r2,[r6]
 193:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 421              	 .loc 1 193 13 is_stmt 1 view .LVU110
 422 00e0 FC37     	 adds r7,r7,#252
 423 00e2 2B78     	 ldrb r3,[r5]
 424 00e4 2178     	 ldrb r1,[r4]
 425 00e6 0078     	 ldrb r0,[r0]
 426 00e8 7F6A     	 ldr r7,[r7,#36]
 427 00ea B847     	 blx r7
 428              	.LVL31:
 429              	.L25:
 195:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 430              	 .loc 1 195 9 view .LVU111
 195:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 431              	 .loc 1 195 12 is_stmt 0 view .LVU112
 432 00ec 2B78     	 ldrb r3,[r5]
 433 00ee 002B     	 cmp r3,#0
 434 00f0 CCD1     	 bne .L14
 197:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 435              	 .loc 1 197 13 is_stmt 1 view .LVU113
 197:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 436              	 .loc 1 197 18 is_stmt 0 view .LVU114
 437 00f2 0133     	 adds r3,r3,#1
 438 00f4 C1E7     	 b .L42
 439              	.L44:
 440 00f6 C046     	 .align 2
 441              	.L43:
 442 00f8 00000000 	 .word rom_func_table
 443              	 .cfi_endproc
 444              	.LFE46:
 446              	 .section .text.turn_motor,"ax",%progbits
 447              	 .align 1
 448              	 .global turn_motor
 449              	 .syntax unified
 450              	 .code 16
 451              	 .thumb_func
 452              	 .fpu softvfp
 454              	turn_motor:
 455              	.LVL32:
 456              	.LFB47:
 205:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     const uint32_t wait_time_discharge = WAIT_ABOUT_1MS * 32;
 457              	 .loc 1 205 1 is_stmt 1 view-0
 458              	 .cfi_startproc
 459              	 
 460              	 
 205:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     const uint32_t wait_time_discharge = WAIT_ABOUT_1MS * 32;
 461              	 .loc 1 205 1 is_stmt 0 view .LVU116
 462 0000 F0B5     	 push {r4,r5,r6,r7,lr}
 463              	.LCFI2:
 464              	 .cfi_def_cfa_offset 20
 465              	 .cfi_offset 4,-20
 466              	 .cfi_offset 5,-16
 467              	 .cfi_offset 6,-12
 468              	 .cfi_offset 7,-8
 469              	 .cfi_offset 14,-4
 470 0002 0F00     	 movs r7,r1
 471 0004 1400     	 movs r4,r2
 472 0006 85B0     	 sub sp,sp,#20
 473              	.LCFI3:
 474              	 .cfi_def_cfa_offset 40
 475 0008 0293     	 str r3,[sp,#8]
 476 000a 0AAB     	 add r3,sp,#40
 477              	.LVL33:
 205:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     const uint32_t wait_time_discharge = WAIT_ABOUT_1MS * 32;
 478              	 .loc 1 205 1 view .LVU117
 479 000c 20CB     	 ldmia r3!,{r5}
 480              	.LVL34:
 205:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     const uint32_t wait_time_discharge = WAIT_ABOUT_1MS * 32;
 481              	 .loc 1 205 1 view .LVU118
 482 000e 0390     	 str r0,[sp,#12]
 483 0010 1E78     	 ldrb r6,[r3]
 206:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     const uint32_t wait_time_charge = WAIT_ABOUT_1MS;
 484              	 .loc 1 206 5 is_stmt 1 view .LVU119
 485              	.LVL35:
 207:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 486              	 .loc 1 207 5 view .LVU120
 209:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 487              	 .loc 1 209 5 view .LVU121
 488              	.L46:
 209:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 489              	 .loc 1 209 11 view .LVU122
 490              	 .loc 1 230 5 view .LVU123
 209:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 491              	 .loc 1 209 13 is_stmt 0 view .LVU124
 492 0012 0320     	 movs r0,#3
 493 0014 1649     	 ldr r1,.L50
 494 0016 FFF7FEFF 	 bl shc_compare
 495              	.LVL36:
 209:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 496              	 .loc 1 209 11 view .LVU125
 497 001a 0028     	 cmp r0,#0
 498 001c 20D0     	 beq .L47
 213:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     sys_tim_singleshot_32(0, wait_time_discharge, 14);
 499              	 .loc 1 213 5 is_stmt 1 view .LVU126
 500 001e 2100     	 movs r1,r4
 501 0020 3800     	 movs r0,r7
 502 0022 029A     	 ldr r2,[sp,#8]
 503 0024 2B00     	 movs r3,r5
 504 0026 0096     	 str r6,[sp]
 505 0028 FFF7FEFF 	 bl toggle_lock
 506              	.LVL37:
 214:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (!lock)
 507              	 .loc 1 214 5 view .LVU127
 508 002c 8021     	 movs r1,#128
 509 002e 0E22     	 movs r2,#14
 510 0030 0020     	 movs r0,#0
 511 0032 4903     	 lsls r1,r1,#13
 512 0034 FFF7FEFF 	 bl sys_tim_singleshot_32
 513              	.LVL38:
 215:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 514              	 .loc 1 215 5 view .LVU128
 215:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 515              	 .loc 1 215 8 is_stmt 0 view .LVU129
 516 0038 002E     	 cmp r6,#0
 517 003a 15D1     	 bne .L48
 217:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 518              	 .loc 1 217 9 is_stmt 1 view .LVU130
 217:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 519              	 .loc 1 217 14 is_stmt 0 view .LVU131
 520 003c 2E70     	 strb r6,[r5]
 521              	.L49:
 223:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     sys_tim_singleshot_32(0, wait_time_charge, 14);
 522              	 .loc 1 223 5 is_stmt 1 view .LVU132
 523 003e 2178     	 ldrb r1,[r4]
 524 0040 0C4C     	 ldr r4,.L50+4
 525              	.LVL39:
 223:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     sys_tim_singleshot_32(0, wait_time_charge, 14);
 526              	 .loc 1 223 5 is_stmt 0 view .LVU133
 527 0042 029A     	 ldr r2,[sp,#8]
 528 0044 FC34     	 adds r4,r4,#252
 529 0046 2B78     	 ldrb r3,[r5]
 530 0048 3878     	 ldrb r0,[r7]
 531 004a 1278     	 ldrb r2,[r2]
 532 004c 646A     	 ldr r4,[r4,#36]
 533 004e A047     	 blx r4
 534              	.LVL40:
 224:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 535              	 .loc 1 224 5 is_stmt 1 view .LVU134
 536 0050 8021     	 movs r1,#128
 537 0052 0E22     	 movs r2,#14
 538 0054 0020     	 movs r0,#0
 539 0056 0902     	 lsls r1,r1,#8
 540 0058 FFF7FEFF 	 bl sys_tim_singleshot_32
 541              	.LVL41:
 225:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 542              	 .loc 1 225 1 is_stmt 0 view .LVU135
 543 005c 05B0     	 add sp,sp,#20
 544              	 
 545              	.LVL42:
 225:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 546              	 .loc 1 225 1 view .LVU136
 547 005e F0BD     	 pop {r4,r5,r6,r7,pc}
 548              	.LVL43:
 549              	.L47:
 211:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 550              	 .loc 1 211 9 is_stmt 1 view .LVU137
 211:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 551              	 .loc 1 211 25 is_stmt 0 view .LVU138
 552 0060 054B     	 ldr r3,.L50+8
 553 0062 039A     	 ldr r2,[sp,#12]
 554 0064 5361     	 str r3,[r2,#20]
 555 0066 D4E7     	 b .L46
 556              	.L48:
 221:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 557              	 .loc 1 221 9 is_stmt 1 view .LVU139
 221:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 558              	 .loc 1 221 14 is_stmt 0 view .LVU140
 559 0068 0023     	 movs r3,#0
 560 006a 2370     	 strb r3,[r4]
 561 006c E7E7     	 b .L49
 562              	.L51:
 563 006e C046     	 .align 2
 564              	.L50:
 565 0070 B80B0000 	 .word 3000
 566 0074 00000000 	 .word rom_func_table
 567 0078 22222222 	 .word 572662306
 568              	 .cfi_endproc
 569              	.LFE47:
 571              	 .global __aeabi_fmul
 572              	 .global __aeabi_f2uiz
 573              	 .section .text.get_threshold_from_voltage,"ax",%progbits
 574              	 .align 1
 575              	 .global get_threshold_from_voltage
 576              	 .syntax unified
 577              	 .code 16
 578              	 .thumb_func
 579              	 .fpu softvfp
 581              	get_threshold_from_voltage:
 582              	.LVL44:
 583              	.LFB48:
 229:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     return (uint16_t)(input_voltage * 1000.0F);
 584              	 .loc 1 229 1 is_stmt 1 view-0
 585              	 .cfi_startproc
 586              	 
 587              	 
 588              	 .loc 1 230 5 view .LVU142
 229:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     return (uint16_t)(input_voltage * 1000.0F);
 589              	 .loc 1 229 1 is_stmt 0 view .LVU143
 590 0000 10B5     	 push {r4,lr}
 591              	.LCFI4:
 592              	 .cfi_def_cfa_offset 8
 593              	 .cfi_offset 4,-8
 594              	 .cfi_offset 14,-4
 595              	 .loc 1 230 37 view .LVU144
 596 0002 0349     	 ldr r1,.L53
 597 0004 FFF7FEFF 	 bl __aeabi_fmul
 598              	.LVL45:
 231:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 599              	 .loc 1 231 1 view .LVU145
 600              	 
 230:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 601              	 .loc 1 230 12 view .LVU146
 602 0008 FFF7FEFF 	 bl __aeabi_f2uiz
 603              	.LVL46:
 604 000c 80B2     	 uxth r0,r0
 605              	 .loc 1 231 1 view .LVU147
 606 000e 10BD     	 pop {r4,pc}
 607              	.L54:
 608              	 .align 2
 609              	.L53:
 610 0010 00007A44 	 .word 1148846080
 611              	 .cfi_endproc
 612              	.LFE48:
 614              	 .section .text.run_power_state_machine,"ax",%progbits
 615              	 .align 1
 616              	 .global run_power_state_machine
 617              	 .syntax unified
 618              	 .code 16
 619              	 .thumb_func
 620              	 .fpu softvfp
 622              	run_power_state_machine:
 623              	.LFB50:
 232:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 233:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 234:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // Persistent LED State Toggle Implementation
 235:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 236:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** /**
 237:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  * @brief Toggle the persistent LED state stored in NVM and update the physical LED.
 238:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *
 239:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  * This function:
 240:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Reads the current LED state from flash memory.
 241:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Toggles it (0 becomes 1; nonzero becomes 0).
 242:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Powers up and configures the NVM.
 243:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Opens the assembly buffer for the flash page containing LED_STATE_ADDR.
 244:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Updates the state word in the assembly buffer.
 245:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Erases the flash page.
 246:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Programs the flash page with the new value.
 247:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Verifies the programming.
 248:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Powers down the NVM.
 249:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Updates GPIO1 (using set_singlegpio_out) to reflect the new state.
 250:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *
 251:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  * @return The new LED state (0 or 1), or a nonzero error code if an NVM operation fails.
 252:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  */
 253:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** static uint32_t toggle_led_state(void)
 254:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
 255:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     uint8_t err;
 256:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Read the current LED state from flash (assumes memory-mapped NVM)
 257:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     uint32_t current_state = *((volatile uint32_t*) LED_STATE_ADDR);
 258:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Toggle state: if 0 then 1; otherwise, set to 0.
 259:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     uint32_t new_state = (current_state == 0) ? 1 : 0;
 260:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 261:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Power up and configure the NVM using ROM routines
 262:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     switch_on_nvm();
 263:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nvm_config();
 264:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 265:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Open the assembly buffer for the flash page that includes LED_STATE_ADDR
 266:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     err = nvm_open_assembly_buffer(LED_STATE_ADDR);
 267:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (err != 0)
 268:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 269:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         switch_off_nvm();
 270:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         return err;
 271:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 272:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 273:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Write the new LED state into the assembly buffer
 274:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     *((volatile uint32_t*) LED_STATE_ADDR) = new_state;
 275:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 276:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Erase the flash page (ensure LED_STATE_ADDR is in a dedicated page)
 277:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nvm_erase_page();
 278:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 279:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Program the flash page with the new LED state
 280:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     err = nvm_program_page();
 281:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (err != 0)
 282:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 283:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         switch_off_nvm();
 284:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         return err;
 285:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 286:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 287:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Verify the programming result
 288:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     err = nvm_program_verify();
 289:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (err != 0)
 290:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 291:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         switch_off_nvm();
 292:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         return err;
 293:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 294:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 295:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Power down the NVM
 296:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     switch_off_nvm();
 297:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 298:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Update the physical LED via GPIO using set_singlegpio_out (assumes active-high)
 299:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     set_singlegpio_out(new_state ? 1 : 0, LED_GPIO);
 300:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 301:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     return new_state;
 302:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 303:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 304:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 305:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // State Machine Functions
 306:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 307:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** void run_power_state_machine(void)
 308:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
 624              	 .loc 1 308 1 is_stmt 1 view-0
 625              	 .cfi_startproc
 626              	 
 627              	 
 309:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool authenticated = false;
 628              	 .loc 1 309 5 view .LVU149
 629              	.LVL47:
 310:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     Mailbox_t* mbx = get_mailbox_address();
 630              	 .loc 1 310 5 view .LVU150
 308:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool authenticated = false;
 631              	 .loc 1 308 1 is_stmt 0 view .LVU151
 632 0000 F0B5     	 push {r4,r5,r6,r7,lr}
 633              	.LCFI5:
 634              	 .cfi_def_cfa_offset 20
 635              	 .cfi_offset 4,-20
 636              	 .cfi_offset 5,-16
 637              	 .cfi_offset 6,-12
 638              	 .cfi_offset 7,-8
 639              	 .cfi_offset 14,-4
 640              	 .loc 1 310 22 view .LVU152
 641 0002 4C4C     	 ldr r4,.L80
 308:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool authenticated = false;
 642              	 .loc 1 308 1 view .LVU153
 643 0004 87B0     	 sub sp,sp,#28
 644              	.LCFI6:
 645              	 .cfi_def_cfa_offset 48
 646              	 .loc 1 310 22 view .LVU154
 647 0006 636A     	 ldr r3,[r4,#36]
 311:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 312:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool locked = true;
 313:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 314:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     single_gpio_iocfg(true, false, true, false, false, LED_GPIO);
 315:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 316:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     while (true)
 317:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 318:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         switch (current_state)
 319:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 320:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             case POWER_POWER_OFF:
 321:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 mbx->content[1] = MCU_VALID;
 322:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 current_state = POWER_READY_FOR_PASSCODE;
 323:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 324:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 325:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             case POWER_READY_FOR_PASSCODE:
 326:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 if (mbx->content[2] == PASSCODE)
 327:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 328:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     authenticated = true;
 329:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_HARVESTING;
 330:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     mbx->content[3] = PC_VAL;
 331:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     set_hb_switch(hs1, ls1, hs2, ls2);
 332:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 }
 333:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 else if (mbx->content[2] == ZERO_32)
 334:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 335:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_READY_FOR_PASSCODE;
 336:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 }
 337:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 else
 338:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 339:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     mbx->content[3] = PC_INVAL;
 340:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_IDLE;
 648              	 .loc 1 340 35 view .LVU155
 649 0008 0427     	 movs r7,#4
 310:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 650              	 .loc 1 310 22 view .LVU156
 651 000a 0293     	 str r3,[sp,#8]
 652 000c 9847     	 blx r3
 653              	.LVL48:
 311:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 654              	 .loc 1 311 22 view .LVU157
 655 000e 0021     	 movs r1,#0
 310:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 656              	 .loc 1 310 22 view .LVU158
 657 0010 0500     	 movs r5,r0
 658              	.LVL49:
 311:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 659              	 .loc 1 311 5 is_stmt 1 view .LVU159
 311:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 660              	 .loc 1 311 10 is_stmt 0 view .LVU160
 661 0012 0120     	 movs r0,#1
 662              	.LVL50:
 311:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 663              	 .loc 1 311 10 view .LVU161
 664 0014 02AB     	 add r3,sp,#8
 665 0016 1873     	 strb r0,[r3,#12]
 311:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 666              	 .loc 1 311 22 view .LVU162
 667 0018 5973     	 strb r1,[r3,#13]
 311:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 668              	 .loc 1 311 35 view .LVU163
 669 001a 0E23     	 movs r3,#14
 670 001c 02AA     	 add r2,sp,#8
 671 001e 9B18     	 adds r3,r3,r2
 672 0020 1970     	 strb r1,[r3]
 311:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 673              	 .loc 1 311 48 view .LVU164
 674 0022 0F23     	 movs r3,#15
 675 0024 9B18     	 adds r3,r3,r2
 676 0026 1970     	 strb r1,[r3]
 312:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 677              	 .loc 1 312 5 is_stmt 1 view .LVU165
 678              	.LVL51:
 314:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 679              	 .loc 1 314 5 view .LVU166
 680 0028 2300     	 movs r3,r4
 681 002a A433     	 adds r3,r3,#164
 682 002c 1E68     	 ldr r6,[r3]
 683 002e 0200     	 movs r2,r0
 684 0030 0B00     	 movs r3,r1
 685 0032 0190     	 str r0,[sp,#4]
 686 0034 0091     	 str r1,[sp]
 687 0036 B047     	 blx r6
 688              	.LVL52:
 689              	.L56:
 318:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 690              	 .loc 1 318 9 is_stmt 0 view .LVU167
 691 0038 3F4E     	 ldr r6,.L80+4
 692 003a 3078     	 ldrb r0,[r6]
 693              	.L57:
 316:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 694              	 .loc 1 316 5 is_stmt 1 view .LVU168
 318:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 695              	 .loc 1 318 9 view .LVU169
 696 003c 0328     	 cmp r0,#3
 697 003e FDD8     	 bhi .L57
 698 0040 FFF7FEFF 	 bl __gnu_thumb1_case_uqi
 699              	.L59:
 700 0044 02       	 .byte (.L62-.L59)/2
 701 0045 07       	 .byte (.L61-.L59)/2
 702 0046 24       	 .byte (.L60-.L59)/2
 703 0047 2E       	 .byte (.L58-.L59)/2
 704              	 .p2align 1
 705              	.L62:
 321:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 current_state = POWER_READY_FOR_PASSCODE;
 706              	 .loc 1 321 17 view .LVU170
 321:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 current_state = POWER_READY_FOR_PASSCODE;
 707              	 .loc 1 321 33 is_stmt 0 view .LVU171
 708 0048 3C4B     	 ldr r3,.L80+8
 709 004a 6B60     	 str r3,[r5,#4]
 322:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 710              	 .loc 1 322 17 is_stmt 1 view .LVU172
 322:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 711              	 .loc 1 322 31 is_stmt 0 view .LVU173
 712 004c 0123     	 movs r3,#1
 713              	.L78:
 341:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 }
 342:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 343:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 344:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             case POWER_HARVESTING:
 345:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 if (shc_compare(shc_channel_ma, get_threshold_from_voltage(3.0)) == true)
 346:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 347:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     mbx->content[5] = 0x11111111;
 348:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_HARVESTING_DONE;
 714              	 .loc 1 348 35 view .LVU174
 715 004e 3370     	 strb r3,[r6]
 716 0050 F2E7     	 b .L56
 717              	.L61:
 326:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 718              	 .loc 1 326 17 is_stmt 1 view .LVU175
 326:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 719              	 .loc 1 326 33 is_stmt 0 view .LVU176
 720 0052 AB68     	 ldr r3,[r5,#8]
 326:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 721              	 .loc 1 326 20 view .LVU177
 722 0054 3A4A     	 ldr r2,.L80+12
 723 0056 9342     	 cmp r3,r2
 724 0058 12D1     	 bne .L64
 328:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_HARVESTING;
 725              	 .loc 1 328 21 is_stmt 1 view .LVU178
 726              	.LVL53:
 329:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     mbx->content[3] = PC_VAL;
 727              	 .loc 1 329 21 view .LVU179
 329:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     mbx->content[3] = PC_VAL;
 728              	 .loc 1 329 35 is_stmt 0 view .LVU180
 729 005a 0223     	 movs r3,#2
 730 005c 3370     	 strb r3,[r6]
 330:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     set_hb_switch(hs1, ls1, hs2, ls2);
 731              	 .loc 1 330 21 is_stmt 1 view .LVU181
 330:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     set_hb_switch(hs1, ls1, hs2, ls2);
 732              	 .loc 1 330 37 is_stmt 0 view .LVU182
 733 005e 394B     	 ldr r3,.L80+16
 331:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 }
 734              	 .loc 1 331 21 view .LVU183
 735 0060 2600     	 movs r6,r4
 330:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     set_hb_switch(hs1, ls1, hs2, ls2);
 736              	 .loc 1 330 37 view .LVU184
 737 0062 EB60     	 str r3,[r5,#12]
 331:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 }
 738              	 .loc 1 331 21 is_stmt 1 view .LVU185
 739 0064 0E21     	 movs r1,#14
 740 0066 0F23     	 movs r3,#15
 741 0068 02AA     	 add r2,sp,#8
 742 006a 02A8     	 add r0,sp,#8
 743 006c 9B18     	 adds r3,r3,r2
 744 006e 0918     	 adds r1,r1,r0
 745 0070 FC36     	 adds r6,r6,#252
 746 0072 1B78     	 ldrb r3,[r3]
 747 0074 527B     	 ldrb r2,[r2,#13]
 748 0076 0978     	 ldrb r1,[r1]
 749 0078 007B     	 ldrb r0,[r0,#12]
 750 007a 766A     	 ldr r6,[r6,#36]
 751 007c B047     	 blx r6
 752              	.LVL54:
 753 007e DBE7     	 b .L56
 754              	.LVL55:
 755              	.L64:
 333:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 756              	 .loc 1 333 22 view .LVU186
 333:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 757              	 .loc 1 333 25 is_stmt 0 view .LVU187
 758 0080 002B     	 cmp r3,#0
 759 0082 D9D0     	 beq .L56
 339:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_IDLE;
 760              	 .loc 1 339 21 is_stmt 1 view .LVU188
 339:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_IDLE;
 761              	 .loc 1 339 37 is_stmt 0 view .LVU189
 762 0084 304B     	 ldr r3,.L80+20
 340:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 }
 763              	 .loc 1 340 35 view .LVU190
 764 0086 3770     	 strb r7,[r6]
 339:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_IDLE;
 765              	 .loc 1 339 37 view .LVU191
 766 0088 EB60     	 str r3,[r5,#12]
 340:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 }
 767              	 .loc 1 340 21 is_stmt 1 view .LVU192
 768 008a D5E7     	 b .L56
 769              	.L60:
 345:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 770              	 .loc 1 345 17 view .LVU193
 771              	.LVL56:
 230:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 772              	 .loc 1 230 5 view .LVU194
 345:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 773              	 .loc 1 345 21 is_stmt 0 view .LVU195
 774 008c 0320     	 movs r0,#3
 775 008e 2F49     	 ldr r1,.L80+24
 776 0090 FFF7FEFF 	 bl shc_compare
 777              	.LVL57:
 345:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 778              	 .loc 1 345 20 view .LVU196
 779 0094 0028     	 cmp r0,#0
 780 0096 CFD0     	 beq .L56
 347:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_HARVESTING_DONE;
 781              	 .loc 1 347 21 is_stmt 1 view .LVU197
 347:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_HARVESTING_DONE;
 782              	 .loc 1 347 37 is_stmt 0 view .LVU198
 783 0098 2D4B     	 ldr r3,.L80+28
 784 009a 6B61     	 str r3,[r5,#20]
 785              	 .loc 1 348 21 is_stmt 1 view .LVU199
 786              	 .loc 1 348 35 is_stmt 0 view .LVU200
 787 009c 0323     	 movs r3,#3
 788 009e D6E7     	 b .L78
 789              	.L58:
 349:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 }
 350:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 351:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 352:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             case POWER_HARVESTING_DONE:
 353:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 // Toggle the persistent LED state and update GPIO1.
 354:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 toggle_led_state();
 790              	 .loc 1 354 17 is_stmt 1 view .LVU201
 791              	.LBB10:
 792              	.LBI10:
 253:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
 793              	 .loc 1 253 17 view .LVU202
 794              	.LBB11:
 255:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Read the current LED state from flash (assumes memory-mapped NVM)
 795              	 .loc 1 255 5 view .LVU203
 257:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Toggle state: if 0 then 1; otherwise, set to 0.
 796              	 .loc 1 257 5 view .LVU204
 262:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nvm_config();
 797              	 .loc 1 262 5 is_stmt 0 view .LVU205
 798 00a0 C023     	 movs r3,#192
 799 00a2 5B00     	 lsls r3,r3,#1
 800 00a4 E358     	 ldr r3,[r4,r3]
 257:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Toggle state: if 0 then 1; otherwise, set to 0.
 801              	 .loc 1 257 14 view .LVU206
 802 00a6 2B4F     	 ldr r7,.L80+32
 803 00a8 3E68     	 ldr r6,[r7]
 804              	.LVL58:
 259:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 805              	 .loc 1 259 5 is_stmt 1 view .LVU207
 262:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nvm_config();
 806              	 .loc 1 262 5 view .LVU208
 807 00aa 0293     	 str r3,[sp,#8]
 808 00ac 9847     	 blx r3
 809              	.LVL59:
 263:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 810              	 .loc 1 263 5 view .LVU209
 811 00ae C423     	 movs r3,#196
 812 00b0 5B00     	 lsls r3,r3,#1
 813 00b2 E358     	 ldr r3,[r4,r3]
 814 00b4 0293     	 str r3,[sp,#8]
 815 00b6 9847     	 blx r3
 816              	.LVL60:
 266:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (err != 0)
 817              	 .loc 1 266 5 view .LVU210
 266:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (err != 0)
 818              	 .loc 1 266 11 is_stmt 0 view .LVU211
 819 00b8 C623     	 movs r3,#198
 820 00ba 5B00     	 lsls r3,r3,#1
 821 00bc E358     	 ldr r3,[r4,r3]
 822 00be 3800     	 movs r0,r7
 823 00c0 0293     	 str r3,[sp,#8]
 824 00c2 9847     	 blx r3
 825              	.LVL61:
 267:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 826              	 .loc 1 267 5 is_stmt 1 view .LVU212
 269:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         return err;
 827              	 .loc 1 269 9 is_stmt 0 view .LVU213
 828 00c4 C223     	 movs r3,#194
 829 00c6 5B00     	 lsls r3,r3,#1
 830 00c8 E358     	 ldr r3,[r4,r3]
 831 00ca 0293     	 str r3,[sp,#8]
 267:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 832              	 .loc 1 267 8 view .LVU214
 833 00cc 0028     	 cmp r0,#0
 834 00ce 10D0     	 beq .L66
 835              	.LVL62:
 836              	.L79:
 291:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         return err;
 837              	 .loc 1 291 9 is_stmt 1 view .LVU215
 838 00d0 9847     	 blx r3
 839              	.LVL63:
 292:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 840              	 .loc 1 292 9 view .LVU216
 841              	.L67:
 292:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 842              	 .loc 1 292 9 is_stmt 0 view .LVU217
 843              	.LBE11:
 844              	.LBE10:
 355:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 for(;;)
 845              	 .loc 1 355 17 is_stmt 1 discriminator 1 view .LVU218
 356:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 357:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     turn_motor(mbx, &hs1, &ls1, &hs2, &ls2, !locked);
 846              	 .loc 1 357 21 discriminator 1 view .LVU219
 847 00d2 0023     	 movs r3,#0
 848 00d4 02AA     	 add r2,sp,#8
 849 00d6 0193     	 str r3,[sp,#4]
 850 00d8 0F33     	 adds r3,r3,#15
 851 00da 9B18     	 adds r3,r3,r2
 852 00dc 0093     	 str r3,[sp]
 853 00de 0D23     	 movs r3,#13
 854 00e0 9B18     	 adds r3,r3,r2
 855 00e2 0E22     	 movs r2,#14
 856 00e4 02A9     	 add r1,sp,#8
 857 00e6 5218     	 adds r2,r2,r1
 858 00e8 2800     	 movs r0,r5
 859 00ea 05A9     	 add r1,sp,#20
 860 00ec FFF7FEFF 	 bl turn_motor
 861              	.LVL64:
 355:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 for(;;)
 862              	 .loc 1 355 22 discriminator 1 view .LVU220
 863 00f0 EFE7     	 b .L67
 864              	.LVL65:
 865              	.L66:
 866              	.LBB13:
 867              	.LBB12:
 277:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 868              	 .loc 1 277 5 is_stmt 0 view .LVU221
 869 00f2 CE23     	 movs r3,#206
 259:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 870              	 .loc 1 259 51 view .LVU222
 871 00f4 7242     	 rsbs r2,r6,#0
 872 00f6 5641     	 adcs r6,r6,r2
 873              	.LVL66:
 277:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 874              	 .loc 1 277 5 view .LVU223
 875 00f8 5B00     	 lsls r3,r3,#1
 876 00fa E358     	 ldr r3,[r4,r3]
 259:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 877              	 .loc 1 259 51 view .LVU224
 878 00fc F6B2     	 uxtb r6,r6
 274:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 879              	 .loc 1 274 5 is_stmt 1 view .LVU225
 274:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 880              	 .loc 1 274 44 is_stmt 0 view .LVU226
 881 00fe 3E60     	 str r6,[r7]
 277:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 882              	 .loc 1 277 5 is_stmt 1 view .LVU227
 883 0100 0393     	 str r3,[sp,#12]
 884 0102 9847     	 blx r3
 885              	.LVL67:
 280:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (err != 0)
 886              	 .loc 1 280 5 view .LVU228
 280:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (err != 0)
 887              	 .loc 1 280 11 is_stmt 0 view .LVU229
 888 0104 C823     	 movs r3,#200
 889 0106 5B00     	 lsls r3,r3,#1
 890 0108 E358     	 ldr r3,[r4,r3]
 891 010a 0393     	 str r3,[sp,#12]
 892 010c 9847     	 blx r3
 893              	.LVL68:
 281:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 894              	 .loc 1 281 5 is_stmt 1 view .LVU230
 283:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         return err;
 895              	 .loc 1 283 9 is_stmt 0 view .LVU231
 896 010e 029B     	 ldr r3,[sp,#8]
 281:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 897              	 .loc 1 281 8 view .LVU232
 898 0110 0028     	 cmp r0,#0
 899 0112 DDD1     	 bne .L79
 288:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (err != 0)
 900              	 .loc 1 288 5 is_stmt 1 view .LVU233
 288:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (err != 0)
 901              	 .loc 1 288 11 is_stmt 0 view .LVU234
 902 0114 CA23     	 movs r3,#202
 903 0116 5B00     	 lsls r3,r3,#1
 904 0118 E358     	 ldr r3,[r4,r3]
 905 011a 0393     	 str r3,[sp,#12]
 906 011c 9847     	 blx r3
 907              	.LVL69:
 289:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 908              	 .loc 1 289 5 is_stmt 1 view .LVU235
 291:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         return err;
 909              	 .loc 1 291 9 is_stmt 0 view .LVU236
 910 011e 029B     	 ldr r3,[sp,#8]
 289:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 911              	 .loc 1 289 8 view .LVU237
 912 0120 0028     	 cmp r0,#0
 913 0122 D5D1     	 bne .L79
 296:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 914              	 .loc 1 296 5 is_stmt 1 view .LVU238
 299:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 915              	 .loc 1 299 5 is_stmt 0 view .LVU239
 916 0124 AC34     	 adds r4,r4,#172
 296:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 917              	 .loc 1 296 5 view .LVU240
 918 0126 9847     	 blx r3
 919              	.LVL70:
 299:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 920              	 .loc 1 299 5 is_stmt 1 view .LVU241
 921 0128 0121     	 movs r1,#1
 922 012a 3000     	 movs r0,r6
 923 012c 2368     	 ldr r3,[r4]
 924 012e 9847     	 blx r3
 925              	.LVL71:
 301:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 926              	 .loc 1 301 5 view .LVU242
 301:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 927              	 .loc 1 301 12 is_stmt 0 view .LVU243
 928 0130 CFE7     	 b .L67
 929              	.L81:
 930 0132 C046     	 .align 2
 931              	.L80:
 932 0134 00000000 	 .word rom_func_table
 933 0138 00000000 	 .word .LANCHOR3
 934 013c B5005BA5 	 .word -1520762699
 935 0140 21433412 	 .word 305414945
 936 0144 55555555 	 .word 1431655765
 937 0148 99999999 	 .word -1717986919
 938 014c B80B0000 	 .word 3000
 939 0150 11111111 	 .word 286331153
 940 0154 10EF0100 	 .word 126736
 941              	.LBE12:
 942              	.LBE13:
 943              	 .cfi_endproc
 944              	.LFE50:
 946              	 .section .text.run_lock_state_machine,"ax",%progbits
 947              	 .align 1
 948              	 .global run_lock_state_machine
 949              	 .syntax unified
 950              	 .code 16
 951              	 .thumb_func
 952              	 .fpu softvfp
 954              	run_lock_state_machine:
 955              	.LFB51:
 358:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 }
 359:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 mbx->content[3] = HARVESTING_DONE;
 360:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 current_state = POWER_IDLE;
 361:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 362:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 363:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             case POWER_IDLE:
 364:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 // Remain idle; add periodic tasks or sleep logic as needed.
 365:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 366:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 367:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             default:
 368:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 369:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 370:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 371:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 372:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 373:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** void run_lock_state_machine(void)
 374:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
 956              	 .loc 1 374 1 is_stmt 1 view-0
 957              	 .cfi_startproc
 958              	 
 959              	 
 960 0000 07B5     	 push {r0,r1,r2,lr}
 961              	.LCFI7:
 962              	 .cfi_def_cfa_offset 16
 963              	 .cfi_offset 0,-16
 964              	 .cfi_offset 1,-12
 965              	 .cfi_offset 2,-8
 966              	 .cfi_offset 14,-4
 967              	.L84:
 375:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool authenticated = false;
 376:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     Mailbox_t* mbx;
 377:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 378:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     while (true)
 379:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 380:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         switch (current_state)
 968              	 .loc 1 380 9 is_stmt 0 view .LVU245
 969 0002 054B     	 ldr r3,.L86
 970 0004 1B78     	 ldrb r3,[r3]
 971              	.L83:
 376:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 972              	 .loc 1 376 5 is_stmt 1 view .LVU246
 378:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 973              	 .loc 1 378 5 view .LVU247
 974              	 .loc 1 380 9 view .LVU248
 975 0006 002B     	 cmp r3,#0
 976 0008 FDD1     	 bne .L83
 381:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 382:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             case LOCK_LOCKED:
 383:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 mbx = get_mailbox_address();
 977              	 .loc 1 383 17 view .LVU249
 978              	 .loc 1 383 23 is_stmt 0 view .LVU250
 979 000a 044B     	 ldr r3,.L86+4
 980 000c 5B6A     	 ldr r3,[r3,#36]
 981 000e 0193     	 str r3,[sp,#4]
 982 0010 9847     	 blx r3
 983              	.LVL72:
 384:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 mbx->content[1] = MCU_VALID;
 984              	 .loc 1 384 17 is_stmt 1 view .LVU251
 985              	 .loc 1 384 33 is_stmt 0 view .LVU252
 986 0012 034B     	 ldr r3,.L86+8
 987 0014 4360     	 str r3,[r0,#4]
 385:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 988              	 .loc 1 385 17 is_stmt 1 view .LVU253
 989 0016 F4E7     	 b .L84
 990              	.L87:
 991              	 .align 2
 992              	.L86:
 993 0018 00000000 	 .word .LANCHOR3
 994 001c 00000000 	 .word rom_func_table
 995 0020 B5005BA5 	 .word -1520762699
 996              	 .cfi_endproc
 997              	.LFE51:
 999              	 .section .text._nvm_start,"ax",%progbits
 1000              	 .align 1
 1001              	 .global _nvm_start
 1002              	 .syntax unified
 1003              	 .code 16
 1004              	 .thumb_func
 1005              	 .fpu softvfp
 1007              	_nvm_start:
 1008              	.LFB52:
 386:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 387:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             case LOCK_UNLOCKING:
 388:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 // Implement unlocking procedure here if needed.
 389:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 390:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 391:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             case LOCK_UNLOCKED:
 392:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 // Code for unlocked state.
 393:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 394:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 395:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             case LOCK_LOCKING:
 396:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 // Code for locking state.
 397:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 398:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 399:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             default:
 400:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 401:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 402:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 403:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 404:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 405:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 406:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // Application Entry Point
 407:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 408:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** void _nvm_start(void)
 409:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
 1009              	 .loc 1 409 1 view-0
 1010              	 .cfi_startproc
 1011              	 
 1012              	 
 1013              	 
 410:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nfc_init();
 1014              	 .loc 1 410 5 view .LVU255
 409:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nfc_init();
 1015              	 .loc 1 409 1 is_stmt 0 view .LVU256
 1016 0000 73B5     	 push {r0,r1,r4,r5,r6,lr}
 1017              	.LCFI8:
 1018              	 .cfi_def_cfa_offset 24
 1019              	 .cfi_offset 0,-24
 1020              	 .cfi_offset 1,-20
 1021              	 .cfi_offset 4,-16
 1022              	 .cfi_offset 5,-12
 1023              	 .cfi_offset 6,-8
 1024              	 .cfi_offset 14,-4
 1025              	 .loc 1 410 5 view .LVU257
 1026 0002 0F4D     	 ldr r5,.L89
 1027 0004 2C00     	 movs r4,r5
 1028 0006 FC34     	 adds r4,r4,#252
 1029 0008 A36C     	 ldr r3,[r4,#72]
 1030 000a 9847     	 blx r3
 1031              	.LVL73:
 411:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     init_dand();
 1032              	 .loc 1 411 5 is_stmt 1 view .LVU258
 1033 000c 2B6A     	 ldr r3,[r5,#32]
 1034 000e 9847     	 blx r3
 1035              	.LVL74:
 412:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     vars_init();
 1036              	 .loc 1 412 5 view .LVU259
 1037 0010 FFF7FEFF 	 bl vars_init
 1038              	.LVL75:
 413:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     shc_init();
 1039              	 .loc 1 413 5 view .LVU260
 1040 0014 FFF7FEFF 	 bl shc_init
 1041              	.LVL76:
 414:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 415:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     volatile NFC_State_enum_t state = handle_DAND_protocol();
 1042              	 .loc 1 415 5 view .LVU261
 1043              	 .loc 1 415 39 is_stmt 0 view .LVU262
 1044 0018 236F     	 ldr r3,[r4,#112]
 1045 001a 9847     	 blx r3
 1046              	.LVL77:
 1047              	 .loc 1 415 31 view .LVU263
 1048 001c 6B46     	 mov r3,sp
 416:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     volatile NFC_Frame_enum_t frame_type = classify_frame();
 1049              	 .loc 1 416 44 view .LVU264
 1050 001e 266D     	 ldr r6,[r4,#80]
 415:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     volatile NFC_Frame_enum_t frame_type = classify_frame();
 1051              	 .loc 1 415 31 view .LVU265
 1052 0020 9871     	 strb r0,[r3,#6]
 1053              	 .loc 1 416 5 is_stmt 1 view .LVU266
 1054              	 .loc 1 416 44 is_stmt 0 view .LVU267
 1055 0022 B047     	 blx r6
 1056              	.LVL78:
 1057              	 .loc 1 416 31 view .LVU268
 1058 0024 6B46     	 mov r3,sp
 1059 0026 D871     	 strb r0,[r3,#7]
 417:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nfc_state_machine();
 1060              	 .loc 1 417 5 is_stmt 1 view .LVU269
 416:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     volatile NFC_Frame_enum_t frame_type = classify_frame();
 1061              	 .loc 1 416 31 is_stmt 0 view .LVU270
 1062 0028 DD1D     	 adds r5,r3,#7
 1063              	 .loc 1 417 5 view .LVU271
 1064 002a A36F     	 ldr r3,[r4,#120]
 1065 002c 9847     	 blx r3
 1066              	.LVL79:
 418:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 419:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     set_hb_eventctrl(false);
 1067              	 .loc 1 419 5 is_stmt 1 view .LVU272
 1068 002e 0020     	 movs r0,#0
 1069 0030 A36A     	 ldr r3,[r4,#40]
 1070 0032 9847     	 blx r3
 1071              	.LVL80:
 420:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 421:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     while (true)
 1072              	 .loc 1 421 5 view .LVU273
 422:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 423:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         read_frame();
 1073              	 .loc 1 423 9 view .LVU274
 1074 0034 E36C     	 ldr r3,[r4,#76]
 1075 0036 9847     	 blx r3
 1076              	.LVL81:
 424:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         frame_type = classify_frame();
 1077              	 .loc 1 424 9 view .LVU275
 1078              	 .loc 1 424 22 is_stmt 0 view .LVU276
 1079 0038 B047     	 blx r6
 1080              	.LVL82:
 1081              	 .loc 1 424 20 view .LVU277
 1082 003a 2870     	 strb r0,[r5]
 425:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         run_power_state_machine();
 1083              	 .loc 1 425 9 is_stmt 1 view .LVU278
 1084 003c FFF7FEFF 	 bl run_power_state_machine
 1085              	.LVL83:
 1086              	.L90:
 1087              	 .align 2
 1088              	.L89:
 1089 0040 00000000 	 .word rom_func_table
 1090              	 .cfi_endproc
 1091              	.LFE52:
 1093              	 .global done_sweep
 1094              	 .global voltage_sweep
 1095              	 .global turn_cycles
 1096              	 .global current_state
 1097              	 .global sl_counter
 1098              	 .global smack_sl_tag
 1099              	 .section .bss.current_state,"aw",%nobits
 1100              	 .set .LANCHOR3,.+0
 1103              	current_state:
 1104 0000 00       	 .space 1
 1105              	 .section .bss.done_sweep,"aw",%nobits
 1106              	 .set .LANCHOR2,.+0
 1109              	done_sweep:
 1110 0000 00       	 .space 1
 1111              	 .section .bss.example_counter,"aw",%nobits
 1112              	 .align 2
 1113              	 .set .LANCHOR0,.+0
 1116              	example_counter:
 1117 0000 00000000 	 .space 4
 1118              	 .section .bss.sl_counter,"aw",%nobits
 1119              	 .align 2
 1122              	sl_counter:
 1123 0000 00000000 	 .space 4
 1124              	 .section .bss.turn_cycles,"aw",%nobits
 1125              	 .align 2
 1128              	turn_cycles:
 1129 0000 00000000 	 .space 4
 1130              	 .section .bss.voltage_sweep,"aw",%nobits
 1131              	 .align 1
 1132              	 .set .LANCHOR1,.+0
 1135              	voltage_sweep:
 1136 0000 0000     	 .space 2
 1137              	 .section .rodata.smack_sl_tag,"a"
 1140              	smack_sl_tag:
 1141 0000 05C0BEEF 	 .ascii "\005\300\276\357\336\255\000\000\377\377\377\377\341"
 1141      DEAD0000 
 1141      FFFFFFFF 
 1141      E1
 1142 000d 100B0F03 	 .ascii "\020\013\017\003O\321\001KT\002enInfineon Technolog"
 1142      4FD1014B 
 1142      5402656E 
 1142      496E6669 
 1142      6E656F6E 
 1143 002b 69657320 	 .ascii "ies AG  NGC1080  SmAcK  05C0BEEFDEAD000  V4.0.1 (NV"
 1143      41472020 
 1143      4E474331 
 1143      30383020 
 1143      20536D41 
 1144 005e 4D29FEFF 	 .ascii "M)\376\377\377\377\377\377\377"
 1144      FFFFFFFF 
 1144      FF
 1145              	 .text
 1146              	.Letext0:
 1147              	 .file 2 "z:\\documents\\github\\opensesame\\tools\\extern\\gcc-arm-none-eabi\\arm-none-eabi\\include\\machine\\_default_types.h"
 1148              	 .file 3 "z:\\documents\\github\\opensesame\\tools\\extern\\gcc-arm-none-eabi\\arm-none-eabi\\include\\sys\\_stdint.h"
 1149              	 .file 4 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/aes_drv.h"
 1150              	 .file 5 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/aparam.h"
 1151              	 .file 6 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/dand_handler.h"
 1152              	 .file 7 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/dparam.h"
 1153              	 .file 8 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/hbctrl_drv.h"
 1154              	 .file 9 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/hwdiv.h"
 1155              	 .file 10 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/nfc_handler.h"
 1156              	 .file 11 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/nvm.h"
 1157              	 .file 12 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/pmu.h"
 1158              	 .file 13 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/sense_ctrl.h"
 1159              	 .file 14 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/ssp_drv.h"
 1160              	 .file 15 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/sys_tim_drv.h"
 1161              	 .file 16 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/uart_drv.h"
 1162              	 .file 17 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/wdt.h"
 1163              	 .file 18 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/rom_lib.h"
 1164              	 .file 19 "Z:/Documents/GitHub/OpenSesame/smack_lib/inc/shc_lib.h"
 1165              	 .file 20 "Z:/Documents/GitHub/OpenSesame/smack_sl/inc/smack_sl.h"
 1166              	 .file 21 "Z:/Documents/GitHub/OpenSesame/smack_sl/inc/smack_dataexchange.h"
 1167              	 .file 22 "Z:/Documents/GitHub/OpenSesame/smack_lib/inc/sys_tim_lib.h"
DEFINED SYMBOLS
                            *ABS*:00000000 smack_sl.c
    {standard input}:16     .text.example_handler:00000000 $t
    {standard input}:24     .text.example_handler:00000000 example_handler
    {standard input}:46     .text.example_handler:0000000c $d
    {standard input}:51     .text.hardfault_handler:00000000 $t
    {standard input}:58     .text.hardfault_handler:00000000 hardfault_handler
    {standard input}:95     .text.hardfault_handler:00000010 $d
    {standard input}:100    .text.sweep_voltages:00000000 $t
    {standard input}:107    .text.sweep_voltages:00000000 sweep_voltages
    {standard input}:173    .text.sweep_voltages:00000030 $d
    {standard input}:181    .text.toggle_lock:00000000 $t
    {standard input}:188    .text.toggle_lock:00000000 toggle_lock
    {standard input}:442    .text.toggle_lock:000000f8 $d
    {standard input}:447    .text.turn_motor:00000000 $t
    {standard input}:454    .text.turn_motor:00000000 turn_motor
    {standard input}:565    .text.turn_motor:00000070 $d
    {standard input}:574    .text.get_threshold_from_voltage:00000000 $t
    {standard input}:581    .text.get_threshold_from_voltage:00000000 get_threshold_from_voltage
    {standard input}:610    .text.get_threshold_from_voltage:00000010 $d
    {standard input}:615    .text.run_power_state_machine:00000000 $t
    {standard input}:622    .text.run_power_state_machine:00000000 run_power_state_machine
    {standard input}:700    .text.run_power_state_machine:00000044 $d
    {standard input}:704    .text.run_power_state_machine:00000048 $t
    {standard input}:932    .text.run_power_state_machine:00000134 $d
    {standard input}:947    .text.run_lock_state_machine:00000000 $t
    {standard input}:954    .text.run_lock_state_machine:00000000 run_lock_state_machine
    {standard input}:993    .text.run_lock_state_machine:00000018 $d
    {standard input}:1000   .text._nvm_start:00000000 $t
    {standard input}:1007   .text._nvm_start:00000000 _nvm_start
    {standard input}:1089   .text._nvm_start:00000040 $d
    {standard input}:1109   .bss.done_sweep:00000000 done_sweep
    {standard input}:1135   .bss.voltage_sweep:00000000 voltage_sweep
    {standard input}:1128   .bss.turn_cycles:00000000 turn_cycles
    {standard input}:1103   .bss.current_state:00000000 current_state
    {standard input}:1122   .bss.sl_counter:00000000 sl_counter
    {standard input}:1140   .rodata.smack_sl_tag:00000000 smack_sl_tag
    {standard input}:1104   .bss.current_state:00000000 $d
    {standard input}:1110   .bss.done_sweep:00000000 $d
    {standard input}:1112   .bss.example_counter:00000000 $d
    {standard input}:1116   .bss.example_counter:00000000 example_counter
    {standard input}:1119   .bss.sl_counter:00000000 $d
    {standard input}:1125   .bss.turn_cycles:00000000 $d
    {standard input}:1131   .bss.voltage_sweep:00000000 $d

UNDEFINED SYMBOLS
shc_compare
rom_func_table
sys_tim_singleshot_32
__aeabi_fmul
__aeabi_f2uiz
__gnu_thumb1_case_uqi
vars_init
shc_init
