   1              	 .cpu cortex-m0
   2              	 .eabi_attribute 20,1
   3              	 .eabi_attribute 21,1
   4              	 .eabi_attribute 23,3
   5              	 .eabi_attribute 24,1
   6              	 .eabi_attribute 25,1
   7              	 .eabi_attribute 26,1
   8              	 .eabi_attribute 30,4
   9              	 .eabi_attribute 34,0
  10              	 .eabi_attribute 18,4
  11              	 .file "smack_sl.c"
  12              	 .text
  13              	.Ltext0:
  14              	 .cfi_sections .debug_frame
  15              	 .section .text.example_handler,"ax",%progbits
  16              	 .align 1
  17              	 .global example_handler
  18              	 .arch armv6s-m
  19              	 .syntax unified
  20              	 .code 16
  21              	 .thumb_func
  22              	 .fpu softvfp
  24              	example_handler:
  25              	.LFB43:
  26              	 .file 1 "Z:/Documents/GitHub/OpenSesame/smack_sl/src/smack_sl.c"
   1:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** /* ============================================================================
   2:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** ** Copyright (c) 2021 Infineon Technologies AG
   3:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** **               All rights reserved.
   4:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** **               www.infineon.com
   5:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** ** ============================================================================
   6:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** **
   7:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** ** Redistribution and use of this software only permitted to the extent
   8:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** ** expressly agreed with Infineon Technologies AG.
   9:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** ** ============================================================================
  10:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** *
  11:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** */
  12:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
  13:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** /** @file smack_sl.c
  14:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *  @brief Entry point for the application code after low-level ROM boot.
  15:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  */
  16:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
  17:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // standard libs
  18:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #include "core_cm0.h"
  19:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #include <stdbool.h>
  20:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #include <stdint.h>
  21:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
  22:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // ROM and peripheral libraries
  23:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #include "rom_lib.h"
  24:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #include "sys_tim_lib.h"
  25:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #include "shc_lib.h"
  26:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #include "gpio.h"
  27:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
  28:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // smack_sl project files
  29:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #include "smack_sl.h"
  30:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #include "smack_dataexchange.h"
  31:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
  32:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
  33:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // NDEF Tag Definition
  34:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
  35:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** /* NDEF tag defined by user.
  36:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  * To activate this tag, set the field "tag_type_2_ptr" in APARAM.
  37:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  */
  38:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** const uint8_t smack_sl_tag[] =
  39:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
  40:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0x05, 0xc0, 0xbe, 0xef,
  41:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0xde, 0xad, 0x00, 0x00,
  42:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0xff, 0xff, 0xff, 0xff,
  43:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0xE1,
  44:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0x10,
  45:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0x0b,
  46:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0x0f,
  47:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0x03, 0x4f, 0xd1, 0x01,
  48:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0x4b, 0x54, 0x02, 'e',
  49:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'n', 'I', 'n', 'f',
  50:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'i', 'n', 'e', 'o',
  51:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'n', ' ', 'T', 'e',
  52:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'c', 'h', 'n', 'o',
  53:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'l', 'o', 'g', 'i',
  54:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'e', 's', ' ', 'A',
  55:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'G', ' ', ' ', 'N',
  56:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'G', 'C', '1', '0',
  57:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     '8', '0', ' ', ' ',
  58:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'S', 'm', 'A', 'c',
  59:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'K', ' ', ' ', '0',
  60:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     '5', 'C', '0', 'B',
  61:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'E', 'E', 'F', 'D',
  62:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'E', 'A', 'D', '0',
  63:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     '0', '0', ' ', ' ',
  64:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'V', '4', '.', '0',
  65:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     '.', '1', ' ', '(',
  66:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     'N', 'V', 'M', ')',
  67:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0xfe, 0xff, 0xff, 0xff,
  68:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     0xff, 0xff, 0xff
  69:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** };
  70:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
  71:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
  72:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // Definitions
  73:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
  74:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #ifndef wait_about_1ms
  75:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #define WAIT_ABOUT_1MS   0x8000   //!< clock tick constant ~1ms @ 28MHz
  76:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #endif
  77:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
  78:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #define MCU_VALID         0xA55B00B5
  79:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #define PASSCODE          0x12344321
  80:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #define ZERO_32           0x00000000
  81:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #define PC_VAL            0x55555555
  82:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #define PC_INVAL          0x99999999
  83:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #define HARVESTING_DONE   0xBADAB00B
  84:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
  85:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** /*
  86:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****    Previous firmware stored version data in the last flash page (0x1EFF4–0x1EFFF).
  87:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****    To avoid conflicts, we now store the LED state in the previous page.
  88:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****    Assuming a page size of 128 bytes, the previous page spans 0x0001EF00–0x0001EF7F.
  89:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****    Here we reserve address 0x0001EF10 for the LED state.
  90:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** */
  91:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #define LED_STATE_ADDR    0x0001EF10   // New LED state address
  92:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** #define LED_GPIO          1            // LED is connected to GPIO1
  93:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
  94:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
  95:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // Global Variables
  96:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
  97:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** uint32_t sl_counter;
  98:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** Power_State_enum_t current_state = POWER_POWER_OFF;
  99:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** uint32_t turn_cycles = 0;
 100:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 101:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** uint16_t voltage_sweep = 0;
 102:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** bool done_sweep = false;
 103:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 104:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 105:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // Local Function Prototypes
 106:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 107:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** static uint32_t toggle_led_state(void);
 108:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** uint16_t get_threshold_from_voltage(float input_voltage);
 109:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 110:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 111:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // Example Interrupt and Helper Functions
 112:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 113:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** static uint32_t example_counter = 0;
 114:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** void example_handler(void)
 115:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
  27              	 .loc 1 115 1 view-0
  28              	 .cfi_startproc
  29              	 
  30              	 
  31              	 
 116:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     example_counter++;
  32              	 .loc 1 116 5 view .LVU1
  33              	 .loc 1 116 20 is_stmt 0 view .LVU2
  34 0000 024A     	 ldr r2,.L2
 117:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
  35              	 .loc 1 117 1 view .LVU3
  36              	 
 116:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     example_counter++;
  37              	 .loc 1 116 20 view .LVU4
  38 0002 1368     	 ldr r3,[r2]
  39 0004 0133     	 adds r3,r3,#1
  40 0006 1360     	 str r3,[r2]
  41              	 .loc 1 117 1 view .LVU5
  42 0008 7047     	 bx lr
  43              	.L3:
  44 000a C046     	 .align 2
  45              	.L2:
  46 000c 00000000 	 .word .LANCHOR0
  47              	 .cfi_endproc
  48              	.LFE43:
  50              	 .section .text.hardfault_handler,"ax",%progbits
  51              	 .align 1
  52              	 .global hardfault_handler
  53              	 .syntax unified
  54              	 .code 16
  55              	 .thumb_func
  56              	 .fpu softvfp
  58              	hardfault_handler:
  59              	.LFB44:
 118:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 119:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** void hardfault_handler(void)
 120:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
  60              	 .loc 1 120 1 is_stmt 1 view-0
  61              	 .cfi_startproc
  62              	 
  63              	 
  64              	 
 121:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     uint32_t cnt = 30000000;
  65              	 .loc 1 121 5 view .LVU7
  66              	.LVL0:
 122:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     while (cnt--)
  67              	 .loc 1 122 5 view .LVU8
  68              	 .loc 1 122 11 is_stmt 0 view .LVU9
  69 0000 034B     	 ldr r3,.L7
  70              	.LVL1:
  71              	.L5:
  72              	 .loc 1 122 11 is_stmt 1 view .LVU10
  73              	 .loc 1 122 11 is_stmt 0 view .LVU11
  74 0002 013B     	 subs r3,r3,#1
  75              	.LVL2:
  76              	 .loc 1 122 11 view .LVU12
  77 0004 002B     	 cmp r3,#0
  78 0006 00D1     	 bne .L6
 123:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 124:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         __NOP();
 125:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 126:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
  79              	 .loc 1 126 1 view .LVU13
  80              	 
  81 0008 7047     	 bx lr
  82              	.L6:
  83              	.LVL3:
 124:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
  84              	 .loc 1 124 9 is_stmt 1 view .LVU14
  85              	 .syntax divided
  86              	
  87 000a C046     	 nop
  88              	
  89              	 .thumb
  90              	 .syntax unified
  91 000c F9E7     	 b .L5
  92              	.L8:
  93 000e C046     	 .align 2
  94              	.L7:
  95 0010 81C3C901 	 .word 30000001
  96              	 .cfi_endproc
  97              	.LFE44:
  99              	 .section .text.sweep_voltages,"ax",%progbits
 100              	 .align 1
 101              	 .global sweep_voltages
 102              	 .syntax unified
 103              	 .code 16
 104              	 .thumb_func
 105              	 .fpu softvfp
 107              	sweep_voltages:
 108              	.LFB45:
 127:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 128:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** void sweep_voltages(void)
 129:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
 109              	 .loc 1 129 1 view-0
 110              	 .cfi_startproc
 111              	 
 112              	 
 130:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     Mailbox_t* mbx = get_mailbox_address();
 113              	 .loc 1 130 5 view .LVU16
 129:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     Mailbox_t* mbx = get_mailbox_address();
 114              	 .loc 1 129 1 is_stmt 0 view .LVU17
 115 0000 13B5     	 push {r0,r1,r4,lr}
 116              	.LCFI0:
 117              	 .cfi_def_cfa_offset 16
 118              	 .cfi_offset 0,-16
 119              	 .cfi_offset 1,-12
 120              	 .cfi_offset 4,-8
 121              	 .cfi_offset 14,-4
 122              	 .loc 1 130 22 view .LVU18
 123 0002 0B4B     	 ldr r3,.L12
 124 0004 5B6A     	 ldr r3,[r3,#36]
 125 0006 0193     	 str r3,[sp,#4]
 126 0008 9847     	 blx r3
 127              	.LVL4:
 131:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (shc_compare(shc_channel_ma, get_threshold_from_voltage(3.0)) == false)
 128              	 .loc 1 131 9 view .LVU19
 129 000a 0A49     	 ldr r1,.L12+4
 130:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     Mailbox_t* mbx = get_mailbox_address();
 130              	 .loc 1 130 22 view .LVU20
 131 000c 0400     	 movs r4,r0
 132              	.LVL5:
 133              	 .loc 1 131 5 is_stmt 1 view .LVU21
 132:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 133:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         mbx->content[6] = voltage_sweep;
 134:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         done_sweep = true;
 135:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 136:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     else
 137:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 138:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         voltage_sweep++;
 139:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 140:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 141:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 142:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** /* Toggle lock state for H-Bridge control */
 143:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** void toggle_lock(bool *hs1, bool *ls1, bool *hs2, bool *ls2, bool lock)
 144:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
 145:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (lock)
 146:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 147:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         if (*hs1)
 148:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 149:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             *hs1 = false;
 150:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 151:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 152:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         if (!*ls1)
 153:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 154:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             *ls1 = true;
 155:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 156:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 157:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         if (!*hs2)
 158:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 159:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             if (*ls2)
 160:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             {
 161:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 *ls2 = false;
 162:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 163:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             }
 164:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             *hs2 = true;
 165:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 166:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 167:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         if (*ls2)
 168:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 169:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             *ls2 = false;
 170:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 171:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 172:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 173:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     else
 174:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 175:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         if (!*hs1)
 176:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 177:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             if (*ls1)
 178:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             {
 179:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 *ls1 = false;
 180:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 181:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             }
 182:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             *hs1 = true;
 183:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 184:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 185:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         if (*ls1)
 186:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 187:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             *ls1 = false;
 188:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 189:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 190:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         if (*hs2)
 191:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 192:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             *hs2 = false;
 193:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 194:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 195:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         if (!*ls2)
 196:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 197:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             *ls2 = true;
 198:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 199:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 200:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 201:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 202:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 203:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** /* Function to control the motor; as in your original implementation */
 204:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** void turn_motor(Mailbox_t* mbx, bool* hs1, bool* ls1, bool* hs2, bool* ls2, bool lock)
 205:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
 206:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     const uint32_t wait_time_discharge = WAIT_ABOUT_1MS * 32;
 207:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     const uint32_t wait_time_charge = WAIT_ABOUT_1MS;
 208:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 209:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     while (!shc_compare(shc_channel_ma, get_threshold_from_voltage(3.0)))
 210:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 211:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         mbx->content[5] = 0x22222222;
 212:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 213:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     toggle_lock(hs1, ls1, hs2, ls2, lock);
 214:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     sys_tim_singleshot_32(0, wait_time_discharge, 14);
 215:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (!lock)
 216:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 217:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         *ls2 = false;
 218:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 219:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     else
 220:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 221:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         *ls1 = false;
 222:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 223:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 224:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     sys_tim_singleshot_32(0, wait_time_charge, 14);
 225:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 226:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 227:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** /* Helper function: convert voltage (in volts) to threshold ticks. */
 228:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** uint16_t get_threshold_from_voltage(float input_voltage)
 229:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
 230:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     return (uint16_t)(input_voltage * 1000.0F);
 134              	 .loc 1 230 5 view .LVU22
 131:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (shc_compare(shc_channel_ma, get_threshold_from_voltage(3.0)) == false)
 135              	 .loc 1 131 9 is_stmt 0 view .LVU23
 136 000e 0320     	 movs r0,#3
 137              	.LVL6:
 131:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (shc_compare(shc_channel_ma, get_threshold_from_voltage(3.0)) == false)
 138              	 .loc 1 131 9 view .LVU24
 139 0010 FFF7FEFF 	 bl shc_compare
 140              	.LVL7:
 141 0014 084B     	 ldr r3,.L12+8
 131:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (shc_compare(shc_channel_ma, get_threshold_from_voltage(3.0)) == false)
 142              	 .loc 1 131 8 view .LVU25
 143 0016 0028     	 cmp r0,#0
 144 0018 05D1     	 bne .L10
 133:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         done_sweep = true;
 145              	 .loc 1 133 9 is_stmt 1 view .LVU26
 134:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 146              	 .loc 1 134 20 is_stmt 0 view .LVU27
 147 001a 0122     	 movs r2,#1
 133:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         done_sweep = true;
 148              	 .loc 1 133 25 view .LVU28
 149 001c 1B88     	 ldrh r3,[r3]
 150 001e A361     	 str r3,[r4,#24]
 134:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 151              	 .loc 1 134 9 is_stmt 1 view .LVU29
 134:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 152              	 .loc 1 134 20 is_stmt 0 view .LVU30
 153 0020 064B     	 ldr r3,.L12+12
 154 0022 1A70     	 strb r2,[r3]
 155              	.L9:
 140:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 156              	 .loc 1 140 1 view .LVU31
 157              	 
 158              	.LVL8:
 140:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 159              	 .loc 1 140 1 view .LVU32
 160 0024 13BD     	 pop {r0,r1,r4,pc}
 161              	.LVL9:
 162              	.L10:
 138:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 163              	 .loc 1 138 9 is_stmt 1 view .LVU33
 138:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 164              	 .loc 1 138 22 is_stmt 0 view .LVU34
 165 0026 1A88     	 ldrh r2,[r3]
 166 0028 0132     	 adds r2,r2,#1
 167 002a 1A80     	 strh r2,[r3]
 140:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 168              	 .loc 1 140 1 view .LVU35
 169 002c FAE7     	 b .L9
 170              	.L13:
 171 002e C046     	 .align 2
 172              	.L12:
 173 0030 00000000 	 .word rom_func_table
 174 0034 B80B0000 	 .word 3000
 175 0038 00000000 	 .word .LANCHOR1
 176 003c 00000000 	 .word .LANCHOR2
 177              	 .cfi_endproc
 178              	.LFE45:
 180              	 .section .text.toggle_lock,"ax",%progbits
 181              	 .align 1
 182              	 .global toggle_lock
 183              	 .syntax unified
 184              	 .code 16
 185              	 .thumb_func
 186              	 .fpu softvfp
 188              	toggle_lock:
 189              	.LVL10:
 190              	.LFB46:
 144:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (lock)
 191              	 .loc 1 144 1 is_stmt 1 view-0
 192              	 .cfi_startproc
 193              	 
 194              	 
 145:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 195              	 .loc 1 145 5 view .LVU37
 144:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (lock)
 196              	 .loc 1 144 1 is_stmt 0 view .LVU38
 197 0000 F7B5     	 push {r0,r1,r2,r4,r5,r6,r7,lr}
 198              	.LCFI1:
 199              	 .cfi_def_cfa_offset 32
 200              	 .cfi_offset 0,-32
 201              	 .cfi_offset 1,-28
 202              	 .cfi_offset 2,-24
 203              	 .cfi_offset 4,-20
 204              	 .cfi_offset 5,-16
 205              	 .cfi_offset 6,-12
 206              	 .cfi_offset 7,-8
 207              	 .cfi_offset 14,-4
 144:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (lock)
 208              	 .loc 1 144 1 view .LVU39
 209 0002 1D00     	 movs r5,r3
 210 0004 08AB     	 add r3,sp,#32
 211              	.LVL11:
 144:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (lock)
 212              	 .loc 1 144 1 view .LVU40
 213 0006 1B78     	 ldrb r3,[r3]
 214              	.LVL12:
 144:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (lock)
 215              	 .loc 1 144 1 view .LVU41
 216 0008 0C00     	 movs r4,r1
 217 000a 1600     	 movs r6,r2
 147:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 218              	 .loc 1 147 13 view .LVU42
 219 000c 0178     	 ldrb r1,[r0]
 220              	.LVL13:
 147:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 221              	 .loc 1 147 13 view .LVU43
 222 000e 0200     	 movs r2,r0
 223              	.LVL14:
 144:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (lock)
 224              	 .loc 1 144 1 view .LVU44
 225 0010 0190     	 str r0,[sp,#4]
 145:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 226              	 .loc 1 145 8 view .LVU45
 227 0012 002B     	 cmp r3,#0
 228 0014 3BD0     	 beq .L15
 147:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 229              	 .loc 1 147 9 is_stmt 1 view .LVU46
 147:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 230              	 .loc 1 147 12 is_stmt 0 view .LVU47
 231 0016 0029     	 cmp r1,#0
 232 0018 08D0     	 beq .L16
 149:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 233              	 .loc 1 149 13 is_stmt 1 view .LVU48
 149:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 234              	 .loc 1 149 18 is_stmt 0 view .LVU49
 235 001a 0020     	 movs r0,#0
 236              	.LVL15:
 150:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 237              	 .loc 1 150 13 view .LVU50
 238 001c 364F     	 ldr r7,.L43
 149:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 239              	 .loc 1 149 18 view .LVU51
 240 001e 1070     	 strb r0,[r2]
 150:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 241              	 .loc 1 150 13 is_stmt 1 view .LVU52
 242 0020 FC37     	 adds r7,r7,#252
 243 0022 2B78     	 ldrb r3,[r5]
 244 0024 3278     	 ldrb r2,[r6]
 245              	.LVL16:
 150:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 246              	 .loc 1 150 13 is_stmt 0 view .LVU53
 247 0026 2178     	 ldrb r1,[r4]
 248 0028 7F6A     	 ldr r7,[r7,#36]
 249 002a B847     	 blx r7
 250              	.LVL17:
 251              	.L16:
 152:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 252              	 .loc 1 152 9 is_stmt 1 view .LVU54
 152:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 253              	 .loc 1 152 12 is_stmt 0 view .LVU55
 254 002c 2378     	 ldrb r3,[r4]
 255 002e 002B     	 cmp r3,#0
 256 0030 09D1     	 bne .L17
 154:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 257              	 .loc 1 154 13 is_stmt 1 view .LVU56
 154:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 258              	 .loc 1 154 18 is_stmt 0 view .LVU57
 259 0032 0121     	 movs r1,#1
 155:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 260              	 .loc 1 155 13 view .LVU58
 261 0034 304F     	 ldr r7,.L43
 262 0036 0198     	 ldr r0,[sp,#4]
 154:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 263              	 .loc 1 154 18 view .LVU59
 264 0038 2170     	 strb r1,[r4]
 155:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 265              	 .loc 1 155 13 is_stmt 1 view .LVU60
 266 003a FC37     	 adds r7,r7,#252
 267 003c 2B78     	 ldrb r3,[r5]
 268 003e 3278     	 ldrb r2,[r6]
 269 0040 0078     	 ldrb r0,[r0]
 270 0042 7F6A     	 ldr r7,[r7,#36]
 271 0044 B847     	 blx r7
 272              	.LVL18:
 273              	.L17:
 157:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 274              	 .loc 1 157 9 view .LVU61
 157:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 275              	 .loc 1 157 12 is_stmt 0 view .LVU62
 276 0046 3378     	 ldrb r3,[r6]
 277 0048 002B     	 cmp r3,#0
 278 004a 12D1     	 bne .L18
 159:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             {
 279              	 .loc 1 159 13 is_stmt 1 view .LVU63
 150:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 280              	 .loc 1 150 13 is_stmt 0 view .LVU64
 281 004c 2A4A     	 ldr r2,.L43
 282 004e FC32     	 adds r2,r2,#252
 283 0050 576A     	 ldr r7,[r2,#36]
 159:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             {
 284              	 .loc 1 159 16 view .LVU65
 285 0052 2A78     	 ldrb r2,[r5]
 286 0054 002A     	 cmp r2,#0
 287 0056 05D0     	 beq .L19
 161:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 288              	 .loc 1 161 17 is_stmt 1 view .LVU66
 162:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             }
 289              	 .loc 1 162 17 is_stmt 0 view .LVU67
 290 0058 0198     	 ldr r0,[sp,#4]
 161:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 291              	 .loc 1 161 22 view .LVU68
 292 005a 2B70     	 strb r3,[r5]
 162:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             }
 293              	 .loc 1 162 17 is_stmt 1 view .LVU69
 294 005c 3278     	 ldrb r2,[r6]
 295 005e 2178     	 ldrb r1,[r4]
 296 0060 0078     	 ldrb r0,[r0]
 297 0062 B847     	 blx r7
 298              	.LVL19:
 299              	.L19:
 164:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 300              	 .loc 1 164 13 view .LVU70
 164:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 301              	 .loc 1 164 18 is_stmt 0 view .LVU71
 302 0064 0122     	 movs r2,#1
 165:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 303              	 .loc 1 165 13 view .LVU72
 304 0066 0198     	 ldr r0,[sp,#4]
 164:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 305              	 .loc 1 164 18 view .LVU73
 306 0068 3270     	 strb r2,[r6]
 165:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 307              	 .loc 1 165 13 is_stmt 1 view .LVU74
 308 006a 2B78     	 ldrb r3,[r5]
 309 006c 2178     	 ldrb r1,[r4]
 310 006e 0078     	 ldrb r0,[r0]
 311 0070 B847     	 blx r7
 312              	.LVL20:
 313              	.L18:
 167:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 314              	 .loc 1 167 9 view .LVU75
 167:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 315              	 .loc 1 167 12 is_stmt 0 view .LVU76
 316 0072 2B78     	 ldrb r3,[r5]
 317 0074 002B     	 cmp r3,#0
 318 0076 09D0     	 beq .L14
 169:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 319              	 .loc 1 169 13 is_stmt 1 view .LVU77
 169:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 320              	 .loc 1 169 18 is_stmt 0 view .LVU78
 321 0078 0023     	 movs r3,#0
 322              	.L42:
 197:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 323              	 .loc 1 197 18 view .LVU79
 324 007a 2B70     	 strb r3,[r5]
 198:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 325              	 .loc 1 198 13 is_stmt 1 view .LVU80
 326 007c 2178     	 ldrb r1,[r4]
 327 007e 1E4C     	 ldr r4,.L43
 328              	.LVL21:
 198:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 329              	 .loc 1 198 13 is_stmt 0 view .LVU81
 330 0080 0198     	 ldr r0,[sp,#4]
 331 0082 FC34     	 adds r4,r4,#252
 332 0084 3278     	 ldrb r2,[r6]
 333 0086 0078     	 ldrb r0,[r0]
 334 0088 646A     	 ldr r4,[r4,#36]
 335 008a A047     	 blx r4
 336              	.LVL22:
 337              	.L14:
 201:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 338              	 .loc 1 201 1 view .LVU82
 339              	 
 340              	.LVL23:
 341              	.LVL24:
 201:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 342              	 .loc 1 201 1 view .LVU83
 343 008c F7BD     	 pop {r0,r1,r2,r4,r5,r6,r7,pc}
 344              	.LVL25:
 345              	.L15:
 175:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 346              	 .loc 1 175 9 is_stmt 1 view .LVU84
 175:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 347              	 .loc 1 175 12 is_stmt 0 view .LVU85
 348 008e 0029     	 cmp r1,#0
 349 0090 12D1     	 bne .L22
 177:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             {
 350              	 .loc 1 177 13 is_stmt 1 view .LVU86
 150:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 351              	 .loc 1 150 13 is_stmt 0 view .LVU87
 352 0092 194B     	 ldr r3,.L43
 353 0094 FC33     	 adds r3,r3,#252
 354 0096 5F6A     	 ldr r7,[r3,#36]
 177:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             {
 355              	 .loc 1 177 16 view .LVU88
 356 0098 2378     	 ldrb r3,[r4]
 357 009a 002B     	 cmp r3,#0
 358 009c 05D0     	 beq .L23
 179:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 359              	 .loc 1 179 17 is_stmt 1 view .LVU89
 180:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             }
 360              	 .loc 1 180 17 is_stmt 0 view .LVU90
 361 009e 0198     	 ldr r0,[sp,#4]
 362              	.LVL26:
 179:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 363              	 .loc 1 179 22 view .LVU91
 364 00a0 2170     	 strb r1,[r4]
 180:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             }
 365              	 .loc 1 180 17 is_stmt 1 view .LVU92
 366 00a2 2B78     	 ldrb r3,[r5]
 367 00a4 3278     	 ldrb r2,[r6]
 368              	.LVL27:
 180:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             }
 369              	 .loc 1 180 17 is_stmt 0 view .LVU93
 370 00a6 0078     	 ldrb r0,[r0]
 371 00a8 B847     	 blx r7
 372              	.LVL28:
 373              	.L23:
 182:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 374              	 .loc 1 182 13 is_stmt 1 view .LVU94
 182:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 375              	 .loc 1 182 18 is_stmt 0 view .LVU95
 376 00aa 0120     	 movs r0,#1
 377 00ac 019B     	 ldr r3,[sp,#4]
 378 00ae 1870     	 strb r0,[r3]
 183:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 379              	 .loc 1 183 13 is_stmt 1 view .LVU96
 380 00b0 2B78     	 ldrb r3,[r5]
 381 00b2 3278     	 ldrb r2,[r6]
 382 00b4 2178     	 ldrb r1,[r4]
 383 00b6 B847     	 blx r7
 384              	.LVL29:
 385              	.L22:
 185:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 386              	 .loc 1 185 9 view .LVU97
 185:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 387              	 .loc 1 185 12 is_stmt 0 view .LVU98
 388 00b8 2378     	 ldrb r3,[r4]
 389 00ba 002B     	 cmp r3,#0
 390 00bc 09D0     	 beq .L24
 187:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 391              	 .loc 1 187 13 is_stmt 1 view .LVU99
 187:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 392              	 .loc 1 187 18 is_stmt 0 view .LVU100
 393 00be 0021     	 movs r1,#0
 188:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 394              	 .loc 1 188 13 view .LVU101
 395 00c0 0D4F     	 ldr r7,.L43
 396 00c2 0198     	 ldr r0,[sp,#4]
 187:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 397              	 .loc 1 187 18 view .LVU102
 398 00c4 2170     	 strb r1,[r4]
 188:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 399              	 .loc 1 188 13 is_stmt 1 view .LVU103
 400 00c6 FC37     	 adds r7,r7,#252
 401 00c8 2B78     	 ldrb r3,[r5]
 402 00ca 3278     	 ldrb r2,[r6]
 403 00cc 0078     	 ldrb r0,[r0]
 404 00ce 7F6A     	 ldr r7,[r7,#36]
 405 00d0 B847     	 blx r7
 406              	.LVL30:
 407              	.L24:
 190:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 408              	 .loc 1 190 9 view .LVU104
 190:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 409              	 .loc 1 190 12 is_stmt 0 view .LVU105
 410 00d2 3378     	 ldrb r3,[r6]
 411 00d4 002B     	 cmp r3,#0
 412 00d6 09D0     	 beq .L25
 192:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 413              	 .loc 1 192 13 is_stmt 1 view .LVU106
 192:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 414              	 .loc 1 192 18 is_stmt 0 view .LVU107
 415 00d8 0022     	 movs r2,#0
 193:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 416              	 .loc 1 193 13 view .LVU108
 417 00da 074F     	 ldr r7,.L43
 418 00dc 0198     	 ldr r0,[sp,#4]
 192:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 419              	 .loc 1 192 18 view .LVU109
 420 00de 3270     	 strb r2,[r6]
 193:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 421              	 .loc 1 193 13 is_stmt 1 view .LVU110
 422 00e0 FC37     	 adds r7,r7,#252
 423 00e2 2B78     	 ldrb r3,[r5]
 424 00e4 2178     	 ldrb r1,[r4]
 425 00e6 0078     	 ldrb r0,[r0]
 426 00e8 7F6A     	 ldr r7,[r7,#36]
 427 00ea B847     	 blx r7
 428              	.LVL31:
 429              	.L25:
 195:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 430              	 .loc 1 195 9 view .LVU111
 195:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 431              	 .loc 1 195 12 is_stmt 0 view .LVU112
 432 00ec 2B78     	 ldrb r3,[r5]
 433 00ee 002B     	 cmp r3,#0
 434 00f0 CCD1     	 bne .L14
 197:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 435              	 .loc 1 197 13 is_stmt 1 view .LVU113
 197:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             set_hb_switch(*hs1, *ls1, *hs2, *ls2);
 436              	 .loc 1 197 18 is_stmt 0 view .LVU114
 437 00f2 0133     	 adds r3,r3,#1
 438 00f4 C1E7     	 b .L42
 439              	.L44:
 440 00f6 C046     	 .align 2
 441              	.L43:
 442 00f8 00000000 	 .word rom_func_table
 443              	 .cfi_endproc
 444              	.LFE46:
 446              	 .section .text.turn_motor,"ax",%progbits
 447              	 .align 1
 448              	 .global turn_motor
 449              	 .syntax unified
 450              	 .code 16
 451              	 .thumb_func
 452              	 .fpu softvfp
 454              	turn_motor:
 455              	.LVL32:
 456              	.LFB47:
 205:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     const uint32_t wait_time_discharge = WAIT_ABOUT_1MS * 32;
 457              	 .loc 1 205 1 is_stmt 1 view-0
 458              	 .cfi_startproc
 459              	 
 460              	 
 205:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     const uint32_t wait_time_discharge = WAIT_ABOUT_1MS * 32;
 461              	 .loc 1 205 1 is_stmt 0 view .LVU116
 462 0000 F0B5     	 push {r4,r5,r6,r7,lr}
 463              	.LCFI2:
 464              	 .cfi_def_cfa_offset 20
 465              	 .cfi_offset 4,-20
 466              	 .cfi_offset 5,-16
 467              	 .cfi_offset 6,-12
 468              	 .cfi_offset 7,-8
 469              	 .cfi_offset 14,-4
 470 0002 0F00     	 movs r7,r1
 471 0004 1400     	 movs r4,r2
 472 0006 85B0     	 sub sp,sp,#20
 473              	.LCFI3:
 474              	 .cfi_def_cfa_offset 40
 475 0008 0293     	 str r3,[sp,#8]
 476 000a 0AAB     	 add r3,sp,#40
 477              	.LVL33:
 205:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     const uint32_t wait_time_discharge = WAIT_ABOUT_1MS * 32;
 478              	 .loc 1 205 1 view .LVU117
 479 000c 20CB     	 ldmia r3!,{r5}
 480              	.LVL34:
 205:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     const uint32_t wait_time_discharge = WAIT_ABOUT_1MS * 32;
 481              	 .loc 1 205 1 view .LVU118
 482 000e 0390     	 str r0,[sp,#12]
 483 0010 1E78     	 ldrb r6,[r3]
 206:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     const uint32_t wait_time_charge = WAIT_ABOUT_1MS;
 484              	 .loc 1 206 5 is_stmt 1 view .LVU119
 485              	.LVL35:
 207:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 486              	 .loc 1 207 5 view .LVU120
 209:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 487              	 .loc 1 209 5 view .LVU121
 488              	.L46:
 209:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 489              	 .loc 1 209 11 view .LVU122
 490              	 .loc 1 230 5 view .LVU123
 209:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 491              	 .loc 1 209 13 is_stmt 0 view .LVU124
 492 0012 0320     	 movs r0,#3
 493 0014 1649     	 ldr r1,.L50
 494 0016 FFF7FEFF 	 bl shc_compare
 495              	.LVL36:
 209:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 496              	 .loc 1 209 11 view .LVU125
 497 001a 0028     	 cmp r0,#0
 498 001c 20D0     	 beq .L47
 213:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     sys_tim_singleshot_32(0, wait_time_discharge, 14);
 499              	 .loc 1 213 5 is_stmt 1 view .LVU126
 500 001e 2100     	 movs r1,r4
 501 0020 3800     	 movs r0,r7
 502 0022 029A     	 ldr r2,[sp,#8]
 503 0024 2B00     	 movs r3,r5
 504 0026 0096     	 str r6,[sp]
 505 0028 FFF7FEFF 	 bl toggle_lock
 506              	.LVL37:
 214:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (!lock)
 507              	 .loc 1 214 5 view .LVU127
 508 002c 8021     	 movs r1,#128
 509 002e 0E22     	 movs r2,#14
 510 0030 0020     	 movs r0,#0
 511 0032 4903     	 lsls r1,r1,#13
 512 0034 FFF7FEFF 	 bl sys_tim_singleshot_32
 513              	.LVL38:
 215:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 514              	 .loc 1 215 5 view .LVU128
 215:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 515              	 .loc 1 215 8 is_stmt 0 view .LVU129
 516 0038 002E     	 cmp r6,#0
 517 003a 15D1     	 bne .L48
 217:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 518              	 .loc 1 217 9 is_stmt 1 view .LVU130
 217:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 519              	 .loc 1 217 14 is_stmt 0 view .LVU131
 520 003c 2E70     	 strb r6,[r5]
 521              	.L49:
 223:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     sys_tim_singleshot_32(0, wait_time_charge, 14);
 522              	 .loc 1 223 5 is_stmt 1 view .LVU132
 523 003e 2178     	 ldrb r1,[r4]
 524 0040 0C4C     	 ldr r4,.L50+4
 525              	.LVL39:
 223:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     sys_tim_singleshot_32(0, wait_time_charge, 14);
 526              	 .loc 1 223 5 is_stmt 0 view .LVU133
 527 0042 029A     	 ldr r2,[sp,#8]
 528 0044 FC34     	 adds r4,r4,#252
 529 0046 2B78     	 ldrb r3,[r5]
 530 0048 3878     	 ldrb r0,[r7]
 531 004a 1278     	 ldrb r2,[r2]
 532 004c 646A     	 ldr r4,[r4,#36]
 533 004e A047     	 blx r4
 534              	.LVL40:
 224:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 535              	 .loc 1 224 5 is_stmt 1 view .LVU134
 536 0050 8021     	 movs r1,#128
 537 0052 0E22     	 movs r2,#14
 538 0054 0020     	 movs r0,#0
 539 0056 0902     	 lsls r1,r1,#8
 540 0058 FFF7FEFF 	 bl sys_tim_singleshot_32
 541              	.LVL41:
 225:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 542              	 .loc 1 225 1 is_stmt 0 view .LVU135
 543 005c 05B0     	 add sp,sp,#20
 544              	 
 545              	.LVL42:
 225:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 546              	 .loc 1 225 1 view .LVU136
 547 005e F0BD     	 pop {r4,r5,r6,r7,pc}
 548              	.LVL43:
 549              	.L47:
 211:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 550              	 .loc 1 211 9 is_stmt 1 view .LVU137
 211:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 551              	 .loc 1 211 25 is_stmt 0 view .LVU138
 552 0060 054B     	 ldr r3,.L50+8
 553 0062 039A     	 ldr r2,[sp,#12]
 554 0064 5361     	 str r3,[r2,#20]
 555 0066 D4E7     	 b .L46
 556              	.L48:
 221:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 557              	 .loc 1 221 9 is_stmt 1 view .LVU139
 221:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 558              	 .loc 1 221 14 is_stmt 0 view .LVU140
 559 0068 0023     	 movs r3,#0
 560 006a 2370     	 strb r3,[r4]
 561 006c E7E7     	 b .L49
 562              	.L51:
 563 006e C046     	 .align 2
 564              	.L50:
 565 0070 B80B0000 	 .word 3000
 566 0074 00000000 	 .word rom_func_table
 567 0078 22222222 	 .word 572662306
 568              	 .cfi_endproc
 569              	.LFE47:
 571              	 .global __aeabi_fmul
 572              	 .global __aeabi_f2uiz
 573              	 .section .text.get_threshold_from_voltage,"ax",%progbits
 574              	 .align 1
 575              	 .global get_threshold_from_voltage
 576              	 .syntax unified
 577              	 .code 16
 578              	 .thumb_func
 579              	 .fpu softvfp
 581              	get_threshold_from_voltage:
 582              	.LVL44:
 583              	.LFB48:
 229:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     return (uint16_t)(input_voltage * 1000.0F);
 584              	 .loc 1 229 1 is_stmt 1 view-0
 585              	 .cfi_startproc
 586              	 
 587              	 
 588              	 .loc 1 230 5 view .LVU142
 229:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     return (uint16_t)(input_voltage * 1000.0F);
 589              	 .loc 1 229 1 is_stmt 0 view .LVU143
 590 0000 10B5     	 push {r4,lr}
 591              	.LCFI4:
 592              	 .cfi_def_cfa_offset 8
 593              	 .cfi_offset 4,-8
 594              	 .cfi_offset 14,-4
 595              	 .loc 1 230 37 view .LVU144
 596 0002 0349     	 ldr r1,.L53
 597 0004 FFF7FEFF 	 bl __aeabi_fmul
 598              	.LVL45:
 231:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 599              	 .loc 1 231 1 view .LVU145
 600              	 
 230:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 601              	 .loc 1 230 12 view .LVU146
 602 0008 FFF7FEFF 	 bl __aeabi_f2uiz
 603              	.LVL46:
 604 000c 80B2     	 uxth r0,r0
 605              	 .loc 1 231 1 view .LVU147
 606 000e 10BD     	 pop {r4,pc}
 607              	.L54:
 608              	 .align 2
 609              	.L53:
 610 0010 00007A44 	 .word 1148846080
 611              	 .cfi_endproc
 612              	.LFE48:
 614              	 .section .text.run_power_state_machine,"ax",%progbits
 615              	 .align 1
 616              	 .global run_power_state_machine
 617              	 .syntax unified
 618              	 .code 16
 619              	 .thumb_func
 620              	 .fpu softvfp
 622              	run_power_state_machine:
 623              	.LFB50:
 232:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 233:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 234:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // Persistent LED State Toggle Implementation
 235:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 236:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** /**
 237:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  * @brief Toggle the persistent LED state stored in NVM and update the physical LED.
 238:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *
 239:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  * This function:
 240:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Reads the current LED state from flash memory.
 241:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Toggles it (0 becomes 1; nonzero becomes 0).
 242:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Powers up and configures the NVM.
 243:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Opens the assembly buffer for the flash page containing LED_STATE_ADDR.
 244:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Updates the state word in the assembly buffer.
 245:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Erases the flash page.
 246:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Programs the flash page with the new value.
 247:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Verifies the programming.
 248:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Powers down the NVM.
 249:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *   - Updates GPIO1 (using set_singlegpio_out) to reflect the new state.
 250:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  *
 251:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  * @return The new LED state (0 or 1), or a nonzero error code if an NVM operation fails.
 252:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****  */
 253:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** static uint32_t toggle_led_state(void)
 254:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
 255:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     uint8_t err;
 256:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Read the current LED state from flash (assumes memory-mapped NVM)
 257:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     uint32_t current_state = *((volatile uint32_t*) LED_STATE_ADDR);
 258:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Toggle state: if 0 then 1; otherwise, set to 0.
 259:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     uint32_t new_state = (current_state == 0) ? 1 : 0;
 260:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 261:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Power up and configure the NVM using ROM routines
 262:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     switch_on_nvm();
 263:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nvm_config();
 264:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 265:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Open the assembly buffer for the flash page that includes LED_STATE_ADDR
 266:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     err = nvm_open_assembly_buffer(LED_STATE_ADDR);
 267:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (err != 0)
 268:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 269:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         switch_off_nvm();
 270:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         return err;
 271:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 272:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 273:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Write the new LED state into the assembly buffer
 274:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     *((volatile uint32_t*) LED_STATE_ADDR) = new_state;
 275:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 276:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Erase the flash page (ensure LED_STATE_ADDR is in a dedicated page)
 277:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nvm_erase_page();
 278:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 279:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Program the flash page with the new LED state
 280:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     err = nvm_program_page();
 281:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (err != 0)
 282:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 283:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         switch_off_nvm();
 284:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         return err;
 285:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 286:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 287:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Verify the programming result
 288:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     err = nvm_program_verify();
 289:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (err != 0)
 290:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 291:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         switch_off_nvm();
 292:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         return err;
 293:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 294:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 295:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Power down the NVM
 296:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     switch_off_nvm();
 297:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 298:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Update the physical LED via GPIO using set_singlegpio_out (assumes active-high)
 299:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     set_singlegpio_out(new_state ? 1 : 0, LED_GPIO);
 300:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 301:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     return new_state;
 302:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 303:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 304:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 305:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // State Machine Functions
 306:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 307:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** void run_power_state_machine(void)
 308:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
 624              	 .loc 1 308 1 is_stmt 1 view-0
 625              	 .cfi_startproc
 626              	 
 627              	 
 309:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool authenticated = false;
 628              	 .loc 1 309 5 view .LVU149
 629              	.LVL47:
 310:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     Mailbox_t* mbx = get_mailbox_address();
 630              	 .loc 1 310 5 view .LVU150
 308:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool authenticated = false;
 631              	 .loc 1 308 1 is_stmt 0 view .LVU151
 632 0000 F0B5     	 push {r4,r5,r6,r7,lr}
 633              	.LCFI5:
 634              	 .cfi_def_cfa_offset 20
 635              	 .cfi_offset 4,-20
 636              	 .cfi_offset 5,-16
 637              	 .cfi_offset 6,-12
 638              	 .cfi_offset 7,-8
 639              	 .cfi_offset 14,-4
 640              	 .loc 1 310 22 view .LVU152
 641 0002 2B4E     	 ldr r6,.L75
 308:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool authenticated = false;
 642              	 .loc 1 308 1 view .LVU153
 643 0004 87B0     	 sub sp,sp,#28
 644              	.LCFI6:
 645              	 .cfi_def_cfa_offset 48
 646              	 .loc 1 310 22 view .LVU154
 647 0006 736A     	 ldr r3,[r6,#36]
 311:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 312:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool locked = true;
 313:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 314:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     while (true)
 315:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 316:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         switch (current_state)
 317:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 318:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             case POWER_POWER_OFF:
 319:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 mbx->content[1] = MCU_VALID;
 320:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 current_state = POWER_READY_FOR_PASSCODE;
 321:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 322:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 323:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             case POWER_READY_FOR_PASSCODE:
 324:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 if (mbx->content[2] == PASSCODE)
 325:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 326:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     authenticated = true;
 327:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_HARVESTING;
 328:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     mbx->content[3] = PC_VAL;
 329:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     set_hb_switch(hs1, ls1, hs2, ls2);
 330:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 }
 331:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 else if (mbx->content[2] == ZERO_32)
 332:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 333:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_READY_FOR_PASSCODE;
 334:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 }
 335:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 else
 336:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 337:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     mbx->content[3] = PC_INVAL;
 338:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_IDLE;
 648              	 .loc 1 338 35 view .LVU155
 649 0008 0427     	 movs r7,#4
 310:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 650              	 .loc 1 310 22 view .LVU156
 651 000a 0393     	 str r3,[sp,#12]
 652 000c 9847     	 blx r3
 653              	.LVL48:
 311:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 654              	 .loc 1 311 10 view .LVU157
 655 000e 0123     	 movs r3,#1
 656 0010 02AA     	 add r2,sp,#8
 657 0012 1373     	 strb r3,[r2,#12]
 311:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 658              	 .loc 1 311 22 view .LVU158
 659 0014 0023     	 movs r3,#0
 660 0016 5373     	 strb r3,[r2,#13]
 311:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 661              	 .loc 1 311 35 view .LVU159
 662 0018 0E22     	 movs r2,#14
 663 001a 02A9     	 add r1,sp,#8
 664 001c 5218     	 adds r2,r2,r1
 665 001e 1370     	 strb r3,[r2]
 311:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 666              	 .loc 1 311 48 view .LVU160
 667 0020 0F22     	 movs r2,#15
 310:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 668              	 .loc 1 310 22 view .LVU161
 669 0022 0400     	 movs r4,r0
 670              	.LVL49:
 311:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 671              	 .loc 1 311 5 is_stmt 1 view .LVU162
 311:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool hs1 = true, hs2 = false, ls1 = false, ls2 = false;
 672              	 .loc 1 311 48 is_stmt 0 view .LVU163
 673 0024 5218     	 adds r2,r2,r1
 674 0026 1370     	 strb r3,[r2]
 312:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 675              	 .loc 1 312 5 is_stmt 1 view .LVU164
 676              	.LVL50:
 677              	.L56:
 316:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 678              	 .loc 1 316 9 is_stmt 0 view .LVU165
 679 0028 224D     	 ldr r5,.L75+4
 680 002a 2878     	 ldrb r0,[r5]
 681              	.L57:
 314:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 682              	 .loc 1 314 5 is_stmt 1 view .LVU166
 316:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 683              	 .loc 1 316 9 view .LVU167
 684 002c 0328     	 cmp r0,#3
 685 002e FDD8     	 bhi .L57
 686 0030 FFF7FEFF 	 bl __gnu_thumb1_case_uqi
 687              	.L59:
 688 0034 02       	 .byte (.L62-.L59)/2
 689 0035 07       	 .byte (.L61-.L59)/2
 690 0036 24       	 .byte (.L60-.L59)/2
 691 0037 2E       	 .byte (.L58-.L59)/2
 692              	 .p2align 1
 693              	.L62:
 319:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 current_state = POWER_READY_FOR_PASSCODE;
 694              	 .loc 1 319 17 view .LVU168
 319:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 current_state = POWER_READY_FOR_PASSCODE;
 695              	 .loc 1 319 33 is_stmt 0 view .LVU169
 696 0038 1F4B     	 ldr r3,.L75+8
 697 003a 6360     	 str r3,[r4,#4]
 320:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 698              	 .loc 1 320 17 is_stmt 1 view .LVU170
 320:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 699              	 .loc 1 320 31 is_stmt 0 view .LVU171
 700 003c 0123     	 movs r3,#1
 701              	.L74:
 339:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 }
 340:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 341:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 342:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             case POWER_HARVESTING:
 343:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 if (shc_compare(shc_channel_ma, get_threshold_from_voltage(3.0)) == true)
 344:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 345:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     mbx->content[5] = 0x11111111;
 346:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_HARVESTING_DONE;
 702              	 .loc 1 346 35 view .LVU172
 703 003e 2B70     	 strb r3,[r5]
 704 0040 F2E7     	 b .L56
 705              	.L61:
 324:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 706              	 .loc 1 324 17 is_stmt 1 view .LVU173
 324:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 707              	 .loc 1 324 33 is_stmt 0 view .LVU174
 708 0042 A368     	 ldr r3,[r4,#8]
 324:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 709              	 .loc 1 324 20 view .LVU175
 710 0044 1D4A     	 ldr r2,.L75+12
 711 0046 9342     	 cmp r3,r2
 712 0048 12D1     	 bne .L64
 326:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_HARVESTING;
 713              	 .loc 1 326 21 is_stmt 1 view .LVU176
 714              	.LVL51:
 327:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     mbx->content[3] = PC_VAL;
 715              	 .loc 1 327 21 view .LVU177
 327:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     mbx->content[3] = PC_VAL;
 716              	 .loc 1 327 35 is_stmt 0 view .LVU178
 717 004a 0223     	 movs r3,#2
 718 004c 2B70     	 strb r3,[r5]
 328:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     set_hb_switch(hs1, ls1, hs2, ls2);
 719              	 .loc 1 328 21 is_stmt 1 view .LVU179
 328:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     set_hb_switch(hs1, ls1, hs2, ls2);
 720              	 .loc 1 328 37 is_stmt 0 view .LVU180
 721 004e 1C4B     	 ldr r3,.L75+16
 329:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 }
 722              	 .loc 1 329 21 view .LVU181
 723 0050 3500     	 movs r5,r6
 328:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     set_hb_switch(hs1, ls1, hs2, ls2);
 724              	 .loc 1 328 37 view .LVU182
 725 0052 E360     	 str r3,[r4,#12]
 329:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 }
 726              	 .loc 1 329 21 is_stmt 1 view .LVU183
 727 0054 0E21     	 movs r1,#14
 728 0056 0F23     	 movs r3,#15
 729 0058 02AA     	 add r2,sp,#8
 730 005a 02A8     	 add r0,sp,#8
 731 005c 9B18     	 adds r3,r3,r2
 732 005e 0918     	 adds r1,r1,r0
 733 0060 FC35     	 adds r5,r5,#252
 734 0062 1B78     	 ldrb r3,[r3]
 735 0064 527B     	 ldrb r2,[r2,#13]
 736 0066 0978     	 ldrb r1,[r1]
 737 0068 007B     	 ldrb r0,[r0,#12]
 738 006a 6D6A     	 ldr r5,[r5,#36]
 739 006c A847     	 blx r5
 740              	.LVL52:
 741 006e DBE7     	 b .L56
 742              	.LVL53:
 743              	.L64:
 331:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 744              	 .loc 1 331 22 view .LVU184
 331:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 745              	 .loc 1 331 25 is_stmt 0 view .LVU185
 746 0070 002B     	 cmp r3,#0
 747 0072 D9D0     	 beq .L56
 337:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_IDLE;
 748              	 .loc 1 337 21 is_stmt 1 view .LVU186
 337:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_IDLE;
 749              	 .loc 1 337 37 is_stmt 0 view .LVU187
 750 0074 134B     	 ldr r3,.L75+20
 338:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 }
 751              	 .loc 1 338 35 view .LVU188
 752 0076 2F70     	 strb r7,[r5]
 337:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_IDLE;
 753              	 .loc 1 337 37 view .LVU189
 754 0078 E360     	 str r3,[r4,#12]
 338:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 }
 755              	 .loc 1 338 21 is_stmt 1 view .LVU190
 756 007a D5E7     	 b .L56
 757              	.L60:
 343:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 758              	 .loc 1 343 17 view .LVU191
 759              	.LVL54:
 230:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 760              	 .loc 1 230 5 view .LVU192
 343:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 761              	 .loc 1 343 21 is_stmt 0 view .LVU193
 762 007c 0320     	 movs r0,#3
 763 007e 1249     	 ldr r1,.L75+24
 764 0080 FFF7FEFF 	 bl shc_compare
 765              	.LVL55:
 343:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 766              	 .loc 1 343 20 view .LVU194
 767 0084 0028     	 cmp r0,#0
 768 0086 CFD0     	 beq .L56
 345:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_HARVESTING_DONE;
 769              	 .loc 1 345 21 is_stmt 1 view .LVU195
 345:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     current_state = POWER_HARVESTING_DONE;
 770              	 .loc 1 345 37 is_stmt 0 view .LVU196
 771 0088 104B     	 ldr r3,.L75+28
 772 008a 6361     	 str r3,[r4,#20]
 773              	 .loc 1 346 21 is_stmt 1 view .LVU197
 774              	 .loc 1 346 35 is_stmt 0 view .LVU198
 775 008c 0323     	 movs r3,#3
 776 008e D6E7     	 b .L74
 777              	.L58:
 347:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 }
 348:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 349:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 350:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             case POWER_HARVESTING_DONE:
 351:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 // Toggle the persistent LED state and update GPIO1.
 352:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 for(;;)
 778              	 .loc 1 352 17 is_stmt 1 discriminator 1 view .LVU199
 353:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 354:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                     turn_motor(mbx, &hs1, &ls1, &hs2, &ls2, !locked);
 779              	 .loc 1 354 21 discriminator 1 view .LVU200
 780 0090 0023     	 movs r3,#0
 781 0092 02AA     	 add r2,sp,#8
 782 0094 0193     	 str r3,[sp,#4]
 783 0096 0F33     	 adds r3,r3,#15
 784 0098 9B18     	 adds r3,r3,r2
 785 009a 0093     	 str r3,[sp]
 786 009c 0D23     	 movs r3,#13
 787 009e 9B18     	 adds r3,r3,r2
 788 00a0 0E22     	 movs r2,#14
 789 00a2 02A9     	 add r1,sp,#8
 790 00a4 5218     	 adds r2,r2,r1
 791 00a6 2000     	 movs r0,r4
 792 00a8 05A9     	 add r1,sp,#20
 793 00aa FFF7FEFF 	 bl turn_motor
 794              	.LVL56:
 352:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 {
 795              	 .loc 1 352 22 discriminator 1 view .LVU201
 796 00ae EFE7     	 b .L58
 797              	.L76:
 798              	 .align 2
 799              	.L75:
 800 00b0 00000000 	 .word rom_func_table
 801 00b4 00000000 	 .word .LANCHOR3
 802 00b8 B5005BA5 	 .word -1520762699
 803 00bc 21433412 	 .word 305414945
 804 00c0 55555555 	 .word 1431655765
 805 00c4 99999999 	 .word -1717986919
 806 00c8 B80B0000 	 .word 3000
 807 00cc 11111111 	 .word 286331153
 808              	 .cfi_endproc
 809              	.LFE50:
 811              	 .section .text.run_lock_state_machine,"ax",%progbits
 812              	 .align 1
 813              	 .global run_lock_state_machine
 814              	 .syntax unified
 815              	 .code 16
 816              	 .thumb_func
 817              	 .fpu softvfp
 819              	run_lock_state_machine:
 820              	.LFB51:
 355:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 }
 356:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 mbx->content[3] = HARVESTING_DONE;
 357:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 current_state = POWER_IDLE;
 358:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 359:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 360:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             case POWER_IDLE:
 361:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 // Remain idle; add periodic tasks or sleep logic as needed.
 362:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 363:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 364:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             default:
 365:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 366:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 367:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 368:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 369:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 370:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** void run_lock_state_machine(void)
 371:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
 821              	 .loc 1 371 1 view-0
 822              	 .cfi_startproc
 823              	 
 824              	 
 825 0000 07B5     	 push {r0,r1,r2,lr}
 826              	.LCFI7:
 827              	 .cfi_def_cfa_offset 16
 828              	 .cfi_offset 0,-16
 829              	 .cfi_offset 1,-12
 830              	 .cfi_offset 2,-8
 831              	 .cfi_offset 14,-4
 832              	.L79:
 372:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     bool authenticated = false;
 373:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     Mailbox_t* mbx;
 374:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 375:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     while (true)
 376:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 377:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         switch (current_state)
 833              	 .loc 1 377 9 is_stmt 0 view .LVU203
 834 0002 054B     	 ldr r3,.L81
 835 0004 1B78     	 ldrb r3,[r3]
 836              	.L78:
 373:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 837              	 .loc 1 373 5 is_stmt 1 view .LVU204
 375:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 838              	 .loc 1 375 5 view .LVU205
 839              	 .loc 1 377 9 view .LVU206
 840 0006 002B     	 cmp r3,#0
 841 0008 FDD1     	 bne .L78
 378:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         {
 379:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             case LOCK_LOCKED:
 380:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 mbx = get_mailbox_address();
 842              	 .loc 1 380 17 view .LVU207
 843              	 .loc 1 380 23 is_stmt 0 view .LVU208
 844 000a 044B     	 ldr r3,.L81+4
 845 000c 5B6A     	 ldr r3,[r3,#36]
 846 000e 0193     	 str r3,[sp,#4]
 847 0010 9847     	 blx r3
 848              	.LVL57:
 381:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 mbx->content[1] = MCU_VALID;
 849              	 .loc 1 381 17 is_stmt 1 view .LVU209
 850              	 .loc 1 381 33 is_stmt 0 view .LVU210
 851 0012 034B     	 ldr r3,.L81+8
 852 0014 4360     	 str r3,[r0,#4]
 382:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 853              	 .loc 1 382 17 is_stmt 1 view .LVU211
 854 0016 F4E7     	 b .L79
 855              	.L82:
 856              	 .align 2
 857              	.L81:
 858 0018 00000000 	 .word .LANCHOR3
 859 001c 00000000 	 .word rom_func_table
 860 0020 B5005BA5 	 .word -1520762699
 861              	 .cfi_endproc
 862              	.LFE51:
 864              	 .section .text._nvm_start,"ax",%progbits
 865              	 .align 1
 866              	 .global _nvm_start
 867              	 .syntax unified
 868              	 .code 16
 869              	 .thumb_func
 870              	 .fpu softvfp
 872              	_nvm_start:
 873              	.LFB52:
 383:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 384:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             case LOCK_UNLOCKING:
 385:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 // Implement unlocking procedure here if needed.
 386:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 387:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 388:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             case LOCK_UNLOCKED:
 389:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 // Code for unlocked state.
 390:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 391:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 392:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             case LOCK_LOCKING:
 393:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 // Code for locking state.
 394:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 395:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 396:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****             default:
 397:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****                 break;
 398:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         }
 399:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 400:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 401:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 402:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 403:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** // Application Entry Point
 404:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** //---------------------------------------------------------------------
 405:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** void _nvm_start(void)
 406:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
 874              	 .loc 1 406 1 view-0
 875              	 .cfi_startproc
 876              	 
 877              	 
 878              	 
 407:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nfc_init();
 879              	 .loc 1 407 5 view .LVU213
 406:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nfc_init();
 880              	 .loc 1 406 1 is_stmt 0 view .LVU214
 881 0000 F0B5     	 push {r4,r5,r6,r7,lr}
 882              	.LCFI8:
 883              	 .cfi_def_cfa_offset 20
 884              	 .cfi_offset 4,-20
 885              	 .cfi_offset 5,-16
 886              	 .cfi_offset 6,-12
 887              	 .cfi_offset 7,-8
 888              	 .cfi_offset 14,-4
 889              	 .loc 1 407 5 view .LVU215
 890 0002 364C     	 ldr r4,.L89
 406:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nfc_init();
 891              	 .loc 1 406 1 view .LVU216
 892 0004 89B0     	 sub sp,sp,#36
 893              	.LCFI9:
 894              	 .cfi_def_cfa_offset 56
 895              	 .loc 1 407 5 view .LVU217
 896 0006 2500     	 movs r5,r4
 897 0008 FC35     	 adds r5,r5,#252
 898 000a AB6C     	 ldr r3,[r5,#72]
 899 000c 9847     	 blx r3
 900              	.LVL58:
 408:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     init_dand();
 901              	 .loc 1 408 5 is_stmt 1 view .LVU218
 902 000e 236A     	 ldr r3,[r4,#32]
 409:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     vars_init();
 410:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     shc_init();
 411:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 412:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     volatile NFC_State_enum_t state = handle_DAND_protocol();
 413:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     volatile NFC_Frame_enum_t frame_type = classify_frame();
 414:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nfc_state_machine();
 415:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 416:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     set_hb_eventctrl(false);
 417:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 418:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     single_gpio_iocfg(true, false, true, false, false, LED_GPIO);
 903              	 .loc 1 418 5 is_stmt 0 view .LVU219
 904 0010 0126     	 movs r6,#1
 408:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     init_dand();
 905              	 .loc 1 408 5 view .LVU220
 906 0012 0393     	 str r3,[sp,#12]
 907 0014 9847     	 blx r3
 908              	.LVL59:
 409:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     vars_init();
 909              	 .loc 1 409 5 is_stmt 1 view .LVU221
 910 0016 FFF7FEFF 	 bl vars_init
 911              	.LVL60:
 410:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 912              	 .loc 1 410 5 view .LVU222
 913 001a FFF7FEFF 	 bl shc_init
 914              	.LVL61:
 412:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     volatile NFC_Frame_enum_t frame_type = classify_frame();
 915              	 .loc 1 412 5 view .LVU223
 412:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     volatile NFC_Frame_enum_t frame_type = classify_frame();
 916              	 .loc 1 412 39 is_stmt 0 view .LVU224
 917 001e 2B6F     	 ldr r3,[r5,#112]
 918 0020 9847     	 blx r3
 919              	.LVL62:
 412:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     volatile NFC_Frame_enum_t frame_type = classify_frame();
 920              	 .loc 1 412 31 view .LVU225
 921 0022 0E23     	 movs r3,#14
 922 0024 04AA     	 add r2,sp,#16
 923 0026 9B18     	 adds r3,r3,r2
 924 0028 1870     	 strb r0,[r3]
 413:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nfc_state_machine();
 925              	 .loc 1 413 5 is_stmt 1 view .LVU226
 413:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nfc_state_machine();
 926              	 .loc 1 413 44 is_stmt 0 view .LVU227
 927 002a 2B6D     	 ldr r3,[r5,#80]
 928              	.LBB10:
 929              	.LBB11:
 257:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Toggle state: if 0 then 1; otherwise, set to 0.
 930              	 .loc 1 257 14 view .LVU228
 931 002c 2C4F     	 ldr r7,.L89+4
 932              	.LBE11:
 933              	.LBE10:
 413:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nfc_state_machine();
 934              	 .loc 1 413 44 view .LVU229
 935 002e 0493     	 str r3,[sp,#16]
 936 0030 9847     	 blx r3
 937              	.LVL63:
 413:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nfc_state_machine();
 938              	 .loc 1 413 31 view .LVU230
 939 0032 04AB     	 add r3,sp,#16
 940 0034 D873     	 strb r0,[r3,#15]
 414:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 941              	 .loc 1 414 5 is_stmt 1 view .LVU231
 942 0036 AB6F     	 ldr r3,[r5,#120]
 943 0038 9847     	 blx r3
 944              	.LVL64:
 416:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 945              	 .loc 1 416 5 view .LVU232
 946 003a AB6A     	 ldr r3,[r5,#40]
 947 003c 0020     	 movs r0,#0
 948 003e 9847     	 blx r3
 949              	.LVL65:
 950              	 .loc 1 418 5 view .LVU233
 951 0040 2300     	 movs r3,r4
 952 0042 0021     	 movs r1,#0
 953 0044 A433     	 adds r3,r3,#164
 954 0046 3200     	 movs r2,r6
 955 0048 0091     	 str r1,[sp]
 956 004a 1D68     	 ldr r5,[r3]
 957 004c 3000     	 movs r0,r6
 958 004e 0B00     	 movs r3,r1
 959 0050 0196     	 str r6,[sp,#4]
 960 0052 A847     	 blx r5
 961              	.LVL66:
 419:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     toggle_led_state();
 962              	 .loc 1 419 5 view .LVU234
 963              	.LBB14:
 964              	.LBI10:
 253:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** {
 965              	 .loc 1 253 17 view .LVU235
 966              	.LBB12:
 255:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Read the current LED state from flash (assumes memory-mapped NVM)
 967              	 .loc 1 255 5 view .LVU236
 257:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Toggle state: if 0 then 1; otherwise, set to 0.
 968              	 .loc 1 257 5 view .LVU237
 262:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nvm_config();
 969              	 .loc 1 262 5 is_stmt 0 view .LVU238
 970 0054 C023     	 movs r3,#192
 971 0056 5B00     	 lsls r3,r3,#1
 972 0058 E358     	 ldr r3,[r4,r3]
 257:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     // Toggle state: if 0 then 1; otherwise, set to 0.
 973              	 .loc 1 257 14 view .LVU239
 974 005a 3D68     	 ldr r5,[r7]
 975              	.LVL67:
 259:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 976              	 .loc 1 259 5 is_stmt 1 view .LVU240
 262:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     nvm_config();
 977              	 .loc 1 262 5 view .LVU241
 978 005c 0393     	 str r3,[sp,#12]
 979 005e 9847     	 blx r3
 980              	.LVL68:
 263:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 981              	 .loc 1 263 5 view .LVU242
 982 0060 C423     	 movs r3,#196
 983 0062 5B00     	 lsls r3,r3,#1
 984 0064 E358     	 ldr r3,[r4,r3]
 985 0066 0393     	 str r3,[sp,#12]
 986 0068 9847     	 blx r3
 987              	.LVL69:
 266:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (err != 0)
 988              	 .loc 1 266 5 view .LVU243
 266:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (err != 0)
 989              	 .loc 1 266 11 is_stmt 0 view .LVU244
 990 006a C623     	 movs r3,#198
 991 006c 5B00     	 lsls r3,r3,#1
 992 006e E358     	 ldr r3,[r4,r3]
 993 0070 3800     	 movs r0,r7
 994 0072 0393     	 str r3,[sp,#12]
 995 0074 9847     	 blx r3
 996              	.LVL70:
 267:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 997              	 .loc 1 267 5 is_stmt 1 view .LVU245
 269:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         return err;
 998              	 .loc 1 269 9 is_stmt 0 view .LVU246
 999 0076 C223     	 movs r3,#194
 1000 0078 5B00     	 lsls r3,r3,#1
 1001 007a E358     	 ldr r3,[r4,r3]
 1002 007c 0393     	 str r3,[sp,#12]
 267:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 1003              	 .loc 1 267 8 view .LVU247
 1004 007e 0028     	 cmp r0,#0
 1005 0080 09D0     	 beq .L84
 1006              	.LVL71:
 1007              	.L88:
 283:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         return err;
 1008              	 .loc 1 283 9 view .LVU248
 1009 0082 9847     	 blx r3
 1010              	.LVL72:
 284:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 1011              	 .loc 1 284 9 is_stmt 1 view .LVU249
 1012              	.L85:
 284:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     }
 1013              	 .loc 1 284 9 is_stmt 0 view .LVU250
 1014              	.LBE12:
 1015              	.LBE14:
 420:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 421:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     while (true)
 1016              	 .loc 1 421 5 is_stmt 1 view .LVU251
 422:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 423:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         read_frame();
 1017              	 .loc 1 423 9 view .LVU252
 1018 0084 FC34     	 adds r4,r4,#252
 1019 0086 E36C     	 ldr r3,[r4,#76]
 1020 0088 9847     	 blx r3
 1021              	.LVL73:
 424:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         frame_type = classify_frame();
 1022              	 .loc 1 424 9 view .LVU253
 1023              	 .loc 1 424 22 is_stmt 0 view .LVU254
 1024 008a 049B     	 ldr r3,[sp,#16]
 1025 008c 9847     	 blx r3
 1026              	.LVL74:
 1027              	 .loc 1 424 20 view .LVU255
 1028 008e 04AB     	 add r3,sp,#16
 1029 0090 D873     	 strb r0,[r3,#15]
 425:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         run_power_state_machine();
 1030              	 .loc 1 425 9 is_stmt 1 view .LVU256
 1031 0092 FFF7FEFF 	 bl run_power_state_machine
 1032              	.LVL75:
 1033              	.L84:
 1034              	.LBB15:
 1035              	.LBB13:
 259:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 1036              	 .loc 1 259 51 is_stmt 0 view .LVU257
 1037 0096 6B42     	 rsbs r3,r5,#0
 1038 0098 5D41     	 adcs r5,r5,r3
 1039              	.LVL76:
 277:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 1040              	 .loc 1 277 5 view .LVU258
 1041 009a CE23     	 movs r3,#206
 1042 009c 5B00     	 lsls r3,r3,#1
 1043 009e E358     	 ldr r3,[r4,r3]
 259:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 1044              	 .loc 1 259 51 view .LVU259
 1045 00a0 EDB2     	 uxtb r5,r5
 274:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 1046              	 .loc 1 274 5 is_stmt 1 view .LVU260
 274:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 1047              	 .loc 1 274 44 is_stmt 0 view .LVU261
 1048 00a2 3D60     	 str r5,[r7]
 277:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 1049              	 .loc 1 277 5 is_stmt 1 view .LVU262
 1050 00a4 0593     	 str r3,[sp,#20]
 1051 00a6 9847     	 blx r3
 1052              	.LVL77:
 280:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (err != 0)
 1053              	 .loc 1 280 5 view .LVU263
 280:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (err != 0)
 1054              	 .loc 1 280 11 is_stmt 0 view .LVU264
 1055 00a8 C823     	 movs r3,#200
 1056 00aa 5B00     	 lsls r3,r3,#1
 1057 00ac E358     	 ldr r3,[r4,r3]
 1058 00ae 0593     	 str r3,[sp,#20]
 1059 00b0 9847     	 blx r3
 1060              	.LVL78:
 281:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 1061              	 .loc 1 281 5 is_stmt 1 view .LVU265
 281:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 1062              	 .loc 1 281 8 is_stmt 0 view .LVU266
 1063 00b2 0028     	 cmp r0,#0
 1064 00b4 01D0     	 beq .L86
 283:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         return err;
 1065              	 .loc 1 283 9 is_stmt 1 view .LVU267
 1066 00b6 039B     	 ldr r3,[sp,#12]
 1067 00b8 E3E7     	 b .L88
 1068              	.L86:
 288:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (err != 0)
 1069              	 .loc 1 288 5 view .LVU268
 288:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     if (err != 0)
 1070              	 .loc 1 288 11 is_stmt 0 view .LVU269
 1071 00ba CA23     	 movs r3,#202
 1072 00bc 5B00     	 lsls r3,r3,#1
 1073 00be E358     	 ldr r3,[r4,r3]
 1074 00c0 0593     	 str r3,[sp,#20]
 1075 00c2 9847     	 blx r3
 1076              	.LVL79:
 289:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 1077              	 .loc 1 289 5 is_stmt 1 view .LVU270
 291:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****         return err;
 1078              	 .loc 1 291 9 is_stmt 0 view .LVU271
 1079 00c4 039B     	 ldr r3,[sp,#12]
 289:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c ****     {
 1080              	 .loc 1 289 8 view .LVU272
 1081 00c6 0028     	 cmp r0,#0
 1082 00c8 DBD1     	 bne .L88
 296:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 1083              	 .loc 1 296 5 is_stmt 1 view .LVU273
 1084 00ca 9847     	 blx r3
 1085              	.LVL80:
 299:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** 
 1086              	 .loc 1 299 5 view .LVU274
 1087 00cc 2300     	 movs r3,r4
 1088 00ce AC33     	 adds r3,r3,#172
 1089 00d0 3100     	 movs r1,r6
 1090 00d2 2800     	 movs r0,r5
 1091 00d4 1B68     	 ldr r3,[r3]
 1092 00d6 9847     	 blx r3
 1093              	.LVL81:
 301:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 1094              	 .loc 1 301 5 view .LVU275
 301:Z:/Documents/GitHub/OpenSesame/smack_sl/src\smack_sl.c **** }
 1095              	 .loc 1 301 12 is_stmt 0 view .LVU276
 1096 00d8 D4E7     	 b .L85
 1097              	.L90:
 1098 00da C046     	 .align 2
 1099              	.L89:
 1100 00dc 00000000 	 .word rom_func_table
 1101 00e0 10EF0100 	 .word 126736
 1102              	.LBE13:
 1103              	.LBE15:
 1104              	 .cfi_endproc
 1105              	.LFE52:
 1107              	 .global done_sweep
 1108              	 .global voltage_sweep
 1109              	 .global turn_cycles
 1110              	 .global current_state
 1111              	 .global sl_counter
 1112              	 .global smack_sl_tag
 1113              	 .section .bss.current_state,"aw",%nobits
 1114              	 .set .LANCHOR3,.+0
 1117              	current_state:
 1118 0000 00       	 .space 1
 1119              	 .section .bss.done_sweep,"aw",%nobits
 1120              	 .set .LANCHOR2,.+0
 1123              	done_sweep:
 1124 0000 00       	 .space 1
 1125              	 .section .bss.example_counter,"aw",%nobits
 1126              	 .align 2
 1127              	 .set .LANCHOR0,.+0
 1130              	example_counter:
 1131 0000 00000000 	 .space 4
 1132              	 .section .bss.sl_counter,"aw",%nobits
 1133              	 .align 2
 1136              	sl_counter:
 1137 0000 00000000 	 .space 4
 1138              	 .section .bss.turn_cycles,"aw",%nobits
 1139              	 .align 2
 1142              	turn_cycles:
 1143 0000 00000000 	 .space 4
 1144              	 .section .bss.voltage_sweep,"aw",%nobits
 1145              	 .align 1
 1146              	 .set .LANCHOR1,.+0
 1149              	voltage_sweep:
 1150 0000 0000     	 .space 2
 1151              	 .section .rodata.smack_sl_tag,"a"
 1154              	smack_sl_tag:
 1155 0000 05C0BEEF 	 .ascii "\005\300\276\357\336\255\000\000\377\377\377\377\341"
 1155      DEAD0000 
 1155      FFFFFFFF 
 1155      E1
 1156 000d 100B0F03 	 .ascii "\020\013\017\003O\321\001KT\002enInfineon Technolog"
 1156      4FD1014B 
 1156      5402656E 
 1156      496E6669 
 1156      6E656F6E 
 1157 002b 69657320 	 .ascii "ies AG  NGC1080  SmAcK  05C0BEEFDEAD000  V4.0.1 (NV"
 1157      41472020 
 1157      4E474331 
 1157      30383020 
 1157      20536D41 
 1158 005e 4D29FEFF 	 .ascii "M)\376\377\377\377\377\377\377"
 1158      FFFFFFFF 
 1158      FF
 1159              	 .text
 1160              	.Letext0:
 1161              	 .file 2 "z:\\documents\\github\\opensesame\\tools\\extern\\gcc-arm-none-eabi\\arm-none-eabi\\include\\machine\\_default_types.h"
 1162              	 .file 3 "z:\\documents\\github\\opensesame\\tools\\extern\\gcc-arm-none-eabi\\arm-none-eabi\\include\\sys\\_stdint.h"
 1163              	 .file 4 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/aes_drv.h"
 1164              	 .file 5 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/aparam.h"
 1165              	 .file 6 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/dand_handler.h"
 1166              	 .file 7 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/dparam.h"
 1167              	 .file 8 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/hbctrl_drv.h"
 1168              	 .file 9 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/hwdiv.h"
 1169              	 .file 10 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/nfc_handler.h"
 1170              	 .file 11 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/nvm.h"
 1171              	 .file 12 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/pmu.h"
 1172              	 .file 13 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/sense_ctrl.h"
 1173              	 .file 14 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/ssp_drv.h"
 1174              	 .file 15 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/sys_tim_drv.h"
 1175              	 .file 16 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/uart_drv.h"
 1176              	 .file 17 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/wdt.h"
 1177              	 .file 18 "Z:/Documents/GitHub/OpenSesame/smack_rom/libs/smack_lib/inc/rom_lib.h"
 1178              	 .file 19 "Z:/Documents/GitHub/OpenSesame/smack_lib/inc/shc_lib.h"
 1179              	 .file 20 "Z:/Documents/GitHub/OpenSesame/smack_sl/inc/smack_sl.h"
 1180              	 .file 21 "Z:/Documents/GitHub/OpenSesame/smack_sl/inc/smack_dataexchange.h"
 1181              	 .file 22 "Z:/Documents/GitHub/OpenSesame/smack_lib/inc/sys_tim_lib.h"
DEFINED SYMBOLS
                            *ABS*:00000000 smack_sl.c
    {standard input}:16     .text.example_handler:00000000 $t
    {standard input}:24     .text.example_handler:00000000 example_handler
    {standard input}:46     .text.example_handler:0000000c $d
    {standard input}:51     .text.hardfault_handler:00000000 $t
    {standard input}:58     .text.hardfault_handler:00000000 hardfault_handler
    {standard input}:95     .text.hardfault_handler:00000010 $d
    {standard input}:100    .text.sweep_voltages:00000000 $t
    {standard input}:107    .text.sweep_voltages:00000000 sweep_voltages
    {standard input}:173    .text.sweep_voltages:00000030 $d
    {standard input}:181    .text.toggle_lock:00000000 $t
    {standard input}:188    .text.toggle_lock:00000000 toggle_lock
    {standard input}:442    .text.toggle_lock:000000f8 $d
    {standard input}:447    .text.turn_motor:00000000 $t
    {standard input}:454    .text.turn_motor:00000000 turn_motor
    {standard input}:565    .text.turn_motor:00000070 $d
    {standard input}:574    .text.get_threshold_from_voltage:00000000 $t
    {standard input}:581    .text.get_threshold_from_voltage:00000000 get_threshold_from_voltage
    {standard input}:610    .text.get_threshold_from_voltage:00000010 $d
    {standard input}:615    .text.run_power_state_machine:00000000 $t
    {standard input}:622    .text.run_power_state_machine:00000000 run_power_state_machine
    {standard input}:688    .text.run_power_state_machine:00000034 $d
    {standard input}:692    .text.run_power_state_machine:00000038 $t
    {standard input}:800    .text.run_power_state_machine:000000b0 $d
    {standard input}:812    .text.run_lock_state_machine:00000000 $t
    {standard input}:819    .text.run_lock_state_machine:00000000 run_lock_state_machine
    {standard input}:858    .text.run_lock_state_machine:00000018 $d
    {standard input}:865    .text._nvm_start:00000000 $t
    {standard input}:872    .text._nvm_start:00000000 _nvm_start
    {standard input}:1100   .text._nvm_start:000000dc $d
    {standard input}:1123   .bss.done_sweep:00000000 done_sweep
    {standard input}:1149   .bss.voltage_sweep:00000000 voltage_sweep
    {standard input}:1142   .bss.turn_cycles:00000000 turn_cycles
    {standard input}:1117   .bss.current_state:00000000 current_state
    {standard input}:1136   .bss.sl_counter:00000000 sl_counter
    {standard input}:1154   .rodata.smack_sl_tag:00000000 smack_sl_tag
    {standard input}:1118   .bss.current_state:00000000 $d
    {standard input}:1124   .bss.done_sweep:00000000 $d
    {standard input}:1126   .bss.example_counter:00000000 $d
    {standard input}:1130   .bss.example_counter:00000000 example_counter
    {standard input}:1133   .bss.sl_counter:00000000 $d
    {standard input}:1139   .bss.turn_cycles:00000000 $d
    {standard input}:1145   .bss.voltage_sweep:00000000 $d

UNDEFINED SYMBOLS
shc_compare
rom_func_table
sys_tim_singleshot_32
__aeabi_fmul
__aeabi_f2uiz
__gnu_thumb1_case_uqi
vars_init
shc_init
